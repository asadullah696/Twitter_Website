(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{NP4V:function(e,t,a){"use strict";var o=a("ERkP"),n=a.n(o),r=a("Lsrn"),c=a("shC7"),i=a("k/Ka");const s=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style,c.a.getConstants().isRTL&&r.a.iconRTL],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M4.656 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L4.655 12z"}),n.a.createElement("path",{d:"M12.465 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L12.464 12z"})));s.metadata={width:24,height:24},t.a=s},iyiT:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var o=a("ZUOq");const n=o.a.columnWidths.secondary.normal,r=o.a.columnWidths.primary},mpWK:function(e,t,a){"use strict";var o=a("ERkP"),n=a.n(o),r=a("Lsrn"),c=a("shC7"),i=a("k/Ka");const s=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style,c.a.getConstants().isRTL&&r.a.iconRTL],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M21.185 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.145.146.337.22.53.22s.383-.073.53-.22l9.25-9.25c.293-.295.293-.77 0-1.062z"}),n.a.createElement("path",{d:"M13.376 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.146.145.337.218.53.218s.384-.073.53-.22l9.25-9.25c.293-.293.293-.767 0-1.06z"})));s.metadata={width:24,height:24},t.a=s},u1Qz:function(e,t,a){"use strict";a.r(t),a.d(t,"TweetMediaDetailScreen",(function(){return ue}));a("kYxP"),a("MvUL");var o=a("ERkP"),n=a.n(o),r=a("zh9S"),c=a("H9MA"),i=a("XOJV"),s=a("rxPX"),l=a("0KEI"),d=a("P1r1");const u=(e,t)=>t.match.params.screenName,m=(e,t)=>t.match.params.statusId,w=(e,t)=>{const{match:{params:{index:a}}}=t;return parseInt(a,10)-1},h=(e,t)=>i.a.selectFetchStatus(e,m(0,t)),p=(e,t)=>e.location&&e.location.state&&e.location.state[t],f=(e,t)=>p(t,"forwardPivotInfo"),b=(e,t)=>p(t,"promotedContent"),v=(e,t)=>p(t,"socialContext"),C=(e,t)=>p(t,"contextTweetId"),E=(e,t)=>{const a=m(0,t),o=i.a.select(e,a);return o&&o.conversation_id_str||void 0};var g=Object(s.a)().propsFromState((()=>({fetchStatus:h,forwardPivotInfo:f,index:w,screenName:u,tweetId:m,tweet:i.a.createHydratedTweetSelector(m),promotedContent:b,dataSaver:c.c,socialContext:v,contextTweetId:C,rootTweet:i.a.createHydratedTweetSelector(E),showTweetMediaDetailDrawer:d.A}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(l.createLocalApiErrorHandlerWithContextFactory)("TWEET_MEDIA_DETAIL_SCREEN"),fetchTweetIfNeeded:i.a.fetchOneIfNeeded,googleAnalyticsPageView:r.a,updateSettings:d.M}))).withAnalytics({page:"tweet",section:"media"}),x=a("ymux"),T=a("rkhm"),y=a("iyiT"),I=a("oQhu"),M=a("AUxQ"),_=a("rHpw"),k=a("yw4N"),S=a("v6aA");class L extends n.a.Component{constructor(...e){super(...e),this._getApiErrorHandlerMap=Object(I.a)((e=>Object(T.a)(e))),this._getModule=Object(I.a)(((e,t)=>Object(x.a)({focalTweetId:e,featureSwitches:t})))}render(){const{contextTweetId:e,location:t,promotedContent:a,rootTweet:o,screenName:r,socialContext:c,tweet:i,tweetId:s}=this.props,{featureSwitches:l}=this.context,d={selectedTweetId:s};return n.a.createElement(k.a,{accessibilityExpanded:!0,style:O.root},n.a.createElement(M.a,{apiErrorHandlerMap:this._getApiErrorHandlerMap(r),contextTweetId:e,focalTweet:i,focalTweetId:s,location:t,module:this._getModule(s,l),promotedContent:a,rootTweet:o,selectedTweet:d,socialContext:c,withFocalTweetMedia:!1}))}}L.contextType=S.a;const O=_.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,overflow:"auto",width:y.a,borderLeftWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderStyle:"solid"}})));var P=L,j=a("v//M"),A=a("W5XZ"),D=a("3XMw"),H=a.n(D),R=a("tI3i"),N=a.n(R),W=a("2doW"),B=a("UPvq"),F=a("VTxf"),z=a("wiP2"),X=a("Rp9C"),U=a("xXop"),V=a("lklz"),K=a("MWbm"),Z=a("7N4s"),$=a("/IST"),q=a("/Ikv"),J=a("mjJ+"),Q=a("/yvb"),Y=a("rOXj"),G=a("cHvH"),ee=a("RCZO"),te=a("mpWK"),ae=a("NP4V"),oe=a("ACHU");const ne=H.a.d132269b,re=H.a.dd657211,ce=H.a.h63a5c3b,ie=H.a.f20b040d,se=H.a.f1d9930c,le=H.a.a0e81a2e,de=e=>e-y.a<y.b,ue=e=>{const{isModal:t}=n.a.useContext(Z.b),{handleMediaDetailZoomed:a,handleMediaItemTapped:o,hideButtons:r}=Object(ee.h)(),[c,i]=n.a.useState(!1),{analytics:s,contextTweetId:l,createLocalApiErrorHandler:d,dataSaver:u,fetchStatus:m,fetchTweetIfNeeded:w,forwardPivotInfo:h,googleAnalyticsPageView:p,history:f,index:b,location:v,promotedContent:C,rootTweet:E,screenName:g,showTweetMediaDetailDrawer:x,socialContext:T,tweet:y,tweetId:I,updateSettings:M}=e,_=()=>{const{state:e}=v;if(!e)return;const t=e.mediaItems;return t&&"index"in t&&"items"in t?t:void 0},k=()=>{const e=_();return e?e.index:b},S=()=>{var e;const t=_();if(t)return t.items;if(!y)return;const a=null==(e=y.extended_entities)?void 0:e.media;if(a)return a;if(y.card){const e=L();if(e)return[e]}},L=()=>{if(null!=y&&y.card){const e={tweetId:y.id_str,tweetUserId:y.user.id_str,tweetPermalink:y.permalink};N()(void 0!==y.card,"tweet.card must be defined");const t=y.unified_card&&Object.keys(y.unified_card).length?y.unified_card:y.card,a=Object($.b)(t,e);if(a){const e=q.a.getImageEntityFromCard(a.card);if(e)return q.a.convertImageEntityToPhoto(e)}}},O=()=>{const e=k(),t=S();return t&&t[e]},D=e=>{const t=_();return t?{...v.state,mediaItems:{...t,index:e}}:v.state},H=e=>e&&de(e)?c:x,R=n.a.useCallback((()=>{if(y&&y.user&&g.toLowerCase()!==y.user.screen_name.toLowerCase()){const e=y&&y.user?`/${y.user.screen_name}/status/${y.id_str}/photo/${b+1}`:null;e&&f.replace(e)}}),[f,b,g,y]),ue=n.a.useCallback((()=>{if(y){const e=X.a.getTweetItem(y);p(s.contextualScribeNamespace),s.scribe({action:"show",data:{items:[e]}})}}),[s,p,y]),we=()=>{f.goBackThroughModals()},he=n.a.useCallback((()=>{w(I).catch(d(A.a))}),[d,w,I]),pe=e=>()=>{e&&de(e)?(s.scribe({component:"conversation_drawer",action:c?"collapse":"expand"}),i(!c)):(s.scribe({component:"conversation_drawer",action:x?"collapse":"expand"}),M({showTweetMediaDetailDrawer:!x}))},fe=e=>{const t=k(),a=S();if(e===t)return;s.scribe({component:"gallery",element:t<e?"next":"prev",action:"click",data:{event_value:e+1}});const o=a&&a[e];f.replace({state:D(e),pathname:o&&o.expanded_url})},be=e=>n.a.createElement(J.a,{isFixed:!0,items:[{link:null!=y&&y.user?`/${y.user.screen_name}/status/${y.id_str}`:"/",text:re}],onCloseRequested:e}),ve=e=>{const a=O(),o=Object(ee.b)(a),r=e&&H(e);return t?n.a.createElement(Q.a,{accessibilityLabel:r?ie:re,dominantColor:o.rgb,hoverLabel:{label:r?se:le},icon:r?n.a.createElement(te.a,null):n.a.createElement(ae.a,null),onClick:pe(e),type:"onMediaDominantColorFilled"}):y&&!t?n.a.createElement(Q.a,{accessibilityLabel:ce,dominantColor:a?o.rgb:void 0,icon:n.a.createElement(oe.a,null),renderMenu:be,type:a?"onMediaDominantColorFilled":"onMediaWhiteFilled"}):void 0},Ce=()=>{const e=k(),t=S();if(!t)return n.a.createElement(F.a,null);const r=t[e],c=Object(ee.b)(r).rgb;return n.a.createElement(W.a,{dataSaver:u,dominantColor:c,mediaIndex:e,mediaItems:t,onDismiss:we,onMediaDetailZoomed:a,onMediaItemChanged:fe,onTap:o,promotedContent:C,videoId:1===t.length&&y?V.b.forTweet(y.id_str):void 0})},Ee=e=>{const t=O(),a=Object(ee.b)(t),o=Y.a.isTouchSupported()&&(()=>{const e=k(),t=S();if(!t)return!1;const a=t[e];return"photo"===(null==a?void 0:a.type)||!1})();return n.a.createElement(B.a,{backgroundColor:a,footerButtons:y?n.a.createElement(U.a,{actionSize:"large",activeColor:"white",allowDownvote:!0,color:"white",forwardPivotInfo:y.softIntervention||h,style:me.actionsBar,tweet:y,withCount:!0}):void 0,hideButtons:r,mediaItem:t,onCloseButtonPress:we,overlayFooter:o,topRightButton:ve(e)},n.a.createElement(j.a,{accessibilityLabel:ne,fetchStatus:m,onRequestRetry:he,render:Ce}))},ge=n.a.useRef(null);n.a.useEffect((()=>{ge.current!==I&&(he(),ge.current=I)}),[he,I]);const xe=n.a.useRef(null);return n.a.useEffect((()=>{var e;(null==(e=xe.current)?void 0:e.id_str)!==(null==y?void 0:y.id_str)&&(ue(),xe.current=y)}),[ue,y]),n.a.useEffect((()=>{R()}),[R]),n.a.createElement(z.a.Configure,{headerless:!0},t?n.a.createElement(G.a,null,(({windowWidth:e})=>n.a.createElement(K.a,{style:me.container},n.a.createElement(K.a,{style:me.neighbor},Ee(e)),H(e)?n.a.createElement(P,{contextTweetId:l,location:v,promotedContent:C,rootTweet:E,screenName:g,socialContext:T,tweet:y,tweetId:I}):null))):Ee())},me=_.a.create((e=>({actionsBar:{height:e.spaces.space48,maxWidth:"none",paddingHorizontal:e.spaces.space12},container:{flexDirection:"row",overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%",position:"relative"},neighbor:{flexGrow:1,flexShrink:1}}))),we=g(ue);t.default=we}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.TweetMediaDetail.ad66f375.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"4ZbN":function(e,t,a){"use strict";t.a={deleteRecentSearchesDialog:"deleteRecentSearchesDialog",deleteSavedSearchDialog:"deleteSavedSearchDialog",typeaheadEmptySearch:"typeaheadEmptySearch",typeaheadRecentSearchesHeader:"typeaheadRecentSearchesHeader",typeaheadRecentSearchesItem:"typeaheadRecentSearchesItem",typeaheadSavedSearchesContainer:"typeaheadSavedSearchesContainer",typeaheadSavedSearchesHeader:"typeaheadSavedSearchesHeader",typeaheadSavedSearchesItem:"typeaheadSavedSearchesItem"}},"72nz":function(e,t,a){"use strict";a.r(t),a.d(t,"SearchBoxContainer",(function(){return Ke}));var s=a("97Jx"),r=a.n(s),c=(a("kYxP"),a("MvUL"),a("ERkP")),n=a.n(c),o=a("+Kfv"),i=a("wtjx"),l=a("rxPX");var h=Object(l.a)().propsFromActions((()=>({addQuery:i.a}))).withAnalytics({component:"search_box"}),d=a("Hw0q"),u=a("3XMw"),p=a.n(u),m=a("8jkQ"),S=a("u3ZE"),y=a("rRIm"),b=a("Rp9C"),f=a("lnti"),_=a("hqKg"),v=a("3IPs"),g=a("M0jS"),E=a("G6rE"),w=a("k49u"),I=a("J4ZH"),C=a("0KEI"),x=a("v4XE"),R=a("kGix");const k=e=>Object(w.c)(e,w.a.GenericUserNotFound)||Object(w.c)(e,w.a.OtherUserSuspended)||Object(w.c)(e,w.a.AddressBookLookupNotFound);var T=Object(l.a)().propsFromState((()=>{const e=Object(_.createSelector)(i.g,E.e.selectFetchStatuses,((e,t)=>{const a=Object(f.a)(e.map((e=>{var a;const s=null==(a=e.user)?void 0:a.id;return s&&t[s]?{id:s,fetchStatus:t[s]}:void 0})));return Object(I.a)(a,(e=>e.fetchStatus))})),t=Object(_.createSelector)(e,(e=>(e[R.a.FAILED]||[]).map((e=>e.id)))),a=Object(_.createSelector)(e,E.e.selectErrors,((e,t)=>(e[R.a.FAILED]||[]).filter((({id:e})=>k(t[e]||{}))).map((e=>e.id)))),s=Object(_.createSelector)(e,E.e.selectErrors,((e,t)=>{const a=(e[R.a.FAILED]||[]).filter((({id:e})=>!k(t[e]||{})));return(e[R.a.LOADING]||[]).length>0?R.a.LOADING:(e[R.a.LOADED]||[]).length>0?R.a.LOADED:a.length>0?R.a.FAILED:R.a.NONE})),r=Object(_.createSelector)(i.g,(e=>e.map((e=>({...e,category:v.b.RecentSearch}))))),c=Object(_.createSelector)(x.d,(e=>e.map((e=>({keyword:{query:e.query},savedSearchId:e.id_str,category:v.b.SavedSearch})))));return{isRecentSearchDataLoaded:i.e,recentSearches:r,usersFetchStatus:s,invalidRecentSearchUserIds:a,failedRecentSearchUserIds:t,savedSearches:c}})).adjustStateProps((({failedRecentSearchUserIds:e,invalidRecentSearchUserIds:t,isRecentSearchDataLoaded:a,recentSearches:s,savedSearches:r,usersFetchStatus:c})=>{const n=!s.filter((({user:e})=>e&&t.indexOf(e.id)<0)).length,o=c!==R.a.LOADING&&a&&n?R.a.LOADED:c;return{failedRecentSearchUserIds:e,invalidRecentSearchUserIds:t,recentSearches:s,fetchStatus:o,savedSearches:r}})).propsFromActions((()=>({clearAll:i.b,createLocalApiErrorHandler:Object(C.createLocalApiErrorHandlerWithContextFactory)("SEARCH_ONE_CLICK"),deleteSavedSearch:x.a,fetchRecentSearchesIfNeeded:i.c,fetchSavedSearchesIfNeeded:x.b,fetchUsersIfNeeded:E.e.fetchManyIfNeeded,fetchUsersPresenceIfNeeded:g.b.fetchManyIfNeeded,removeQuery:i.d}))).withAnalytics({element:"typeahead"}),D=a("sYRn"),O=a("v//M"),L=a("7nmT"),U=a.n(L),A=a("hOZg"),F=a("5T6p"),H=a("MWbm"),j=a("/yvb"),P=a("rHpw");const N=p.a.e68b09b4;class M extends n.a.PureComponent{render(){const{id:e,onRemove:t,...a}=this.props;return e?n.a.createElement(H.a,{style:q.root},n.a.createElement(F.a,a),n.a.createElement(j.a,{accessibilityLabel:N,icon:n.a.createElement(A.a,null),onPress:t,size:"small",style:q.button,type:"brandText"})):null}get searchItemData(){const{id:e,image:t,supportText:a,title:s}=this.props;return{category:v.b.RecentSearch,query:e,recentSearchType:v.a.Event,queryMetadata:{id:e,image:t,title:s,supportText:a}}}}const q=P.a.create((e=>({root:{flexDirection:"row",justifyContent:"space-between"},button:{alignSelf:"center"}})));var B=M,z=a("j7Bv"),V=a("5mJL"),Q=a("t62R"),K=a("EHV7");const $=n.a.createElement(A.a,null),W=p.a.e68b09b4;class G extends n.a.Component{render(){const{description:e,id:t,name:a,onRemove:s,withNewTypeaheadUI:r}=this.props;if(!t)return null;const c=r?"xxxLarge":"xLarge",o=n.a.createElement(z.a,{Icon:K.a,color:"primary",size:c,style:Y.searchIcon});return n.a.createElement(V.a,{avatarCell:o,avatarSize:c,cellStyle:Y.bodyColumn},n.a.createElement(H.a,null,n.a.createElement(Q.b,{numberOfLines:1,weight:"bold",withHashflags:!0},a),n.a.createElement(Q.b,{color:"gray700",numberOfLines:1,withHashflags:!0},e)),n.a.createElement(j.a,{accessibilityLabel:W,icon:$,onPress:s,size:"small",type:"brandText"}))}get searchItemData(){const{description:e,id:t,name:a}=this.props;return t?{category:v.b.RecentSearch,query:t,recentSearchType:v.a.Topic,queryMetadata:{id:t,name:a,description:e}}:null}}var X=G;const Y=P.a.create((e=>({bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.space12}}))),Z=(e,t)=>E.e.select(e,t.id),J=(e,t)=>Object(g.c)(e,t.id);var ee=Object(l.a)().propsFromState((()=>({user:Z,userSpace:J}))),te=a("v6aA"),ae=a("IMA+");const se=n.a.createElement(A.a,null),re=p.a.e68b09b4,ce=p.a.fd06b02f;class ne extends n.a.Component{constructor(...e){super(...e),this._handleAvatarClick=()=>{const{userSpace:e}=this.props;e||this._handleClick()},this._handleClick=()=>{const{index:e,onItemClick:t}=this.props,a=this.searchItemData;a&&t(a,e)}}render(){const{onRemove:e,style:t,user:a,userSpace:s,withNewTypeaheadUI:r}=this.props,{featureSwitches:c}=this.context;if(!a)return null;const o=s&&c.isTrue("voice_rooms_recent_search_audiospace_ring_enabled")?s:void 0;o&&(o.accessibilityLabel=ce({screenName:a.screen_name}));const i=n.a.createElement(j.a,{accessibilityLabel:re,icon:se,onPress:e,size:"small",type:"brandText"});return n.a.createElement(ae.a,{avatarSize:"xLarge",avatarUri:a.profile_image_url_https,decoration:i,displayMode:r?"ExperimentalUserTypeahead":"UserCompact",isProtected:a.protected,isVerified:a.verified,name:a.name,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:o,screenName:a.screen_name,style:t,userId:a.id_str,withInteractiveStyling:!1,withLink:!1,withUsernameCenterAligned:!0})}get searchItemData(){return this.props.user?{category:v.b.RecentSearch,link:this.props.user.screen_name,query:this.props.id,recentSearchType:v.a.User}:null}}ne.contextType=te.a;var oe=ee.forwardRef(ne),ie=a("oQhu"),le=a("hiGS"),he=a("Gfoi");const de=n.a.createElement(A.a,null),ue=n.a.createElement(le.a,null),pe=Object(ie.a)((e=>e===v.b.SavedSearch?"destructiveText":"brandText")),me=Object(ie.a)((e=>e===v.b.SavedSearch?ue:de));class Se extends n.a.Component{constructor(...e){super(...e),this._getButtonType=()=>{const{category:e}=this.props;return pe(e)},this._getRemoveIcon=()=>{const{category:e}=this.props;return me(e)}}render(){const{onRemove:e,query:t,withNewTypeaheadUI:a}=this.props,s=a?"xxxLarge":"xLarge",r=n.a.createElement(z.a,{Icon:he.a,color:"neutral",size:s,style:ye.searchIcon});return n.a.createElement(V.a,{avatarCell:r,avatarSize:s,cellStyle:ye.bodyColumn},n.a.createElement(Q.b,{numberOfLines:1,withHashflags:!0},t),n.a.createElement(j.a,{accessibilityLabel:"",icon:this._getRemoveIcon(),onPress:e,size:"small",type:this._getButtonType()}))}get searchItemData(){const{category:e,query:t}=this.props;return{category:e,query:t,recentSearchType:e===v.b.RecentSearch?v.a.Keyword:void 0}}}const ye=P.a.create((e=>({bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.space12,borderWidth:0,backgroundColor:"none"}})));var be=Se,fe=a("htQn");const _e={viewType:"search_item"};class ve extends n.a.Component{constructor(e,t){super(e,t),this._renderSearchItem=()=>{const{index:e,item:t,onItemClick:a}=this.props;return t.keyword?n.a.createElement(be,{category:t.category,onRemove:this._handleOnRemove,query:t.keyword.query,ref:this._handleItemRef,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.user?n.a.createElement(oe,{id:t.user.id||"",index:e,onItemClick:a,onRemove:this._handleOnRemove,ref:this._handleItemRef,style:ge.itemPadding,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.topic?n.a.createElement(X,{description:t.topic.description||"",id:t.topic.id,name:t.topic.name||"",onRemove:this._handleOnRemove,ref:this._handleItemRef,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.event?n.a.createElement(B,{id:t.event.id,image:t.event.image||{url:"",height:0,width:0},onRemove:this._handleOnRemove,ref:this._handleItemRef,supportText:t.event.supportText||"",title:t.event.title||"",withNewTypeaheadUI:this._withNewTypeaheadUI}):null},this._handleItemRef=e=>{this._itemRef=e},this._handleOnRemove=e=>{const{index:t,item:a,onRemoveQuery:s}=this.props;s(a,t),e.stopPropagation()},this._handleOnClick=()=>{const{index:e,item:t,onItemClick:a}=this.props;t.user||this.searchItemData&&a(this.searchItemData,e)},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}render(){const{domId:e,item:t,testID:a}=this.props;return n.a.createElement(o.a,{behavioralEventContext:_e},n.a.createElement(fe.a,{accessibilityRole:"option",accessibilityState:{selected:!!e},focusable:!0,nativeID:e,onClick:this._handleOnClick,style:[ge.root,e&&ge.focused,!(null!=t&&t.user)&&ge.itemPadding],testID:a},this._renderSearchItem()))}get searchItemData(){return this._itemRef?this._itemRef.searchItemData:null}}ve.contextType=te.a;const ge=P.a.create((e=>({root:{cursor:"pointer"},itemPadding:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},focused:{backgroundColor:e.colors.gray0}})));var Ee=ve,we=a("4ZbN"),Ie=a("eb3s"),Ce=a("MXDK");const xe=p.a.ee295fbe,Re={headline:p.a.f45c425f,text:p.a.caae4dd9,confirmButtonLabel:p.a.dbd5d40f},ke=p.a.a8d68f61,Te=p.a.c6530778,De=p.a.e047b8fa,Oe=["user","keyword"];class Le extends n.a.Component{constructor(e,t){super(e,t),this._withNewTypeaheadUI=!1,this._getRecentSearchItems=()=>{const{failedRecentSearchUserIds:e,recentSearches:t}=this.props,{allowedRecentSearchItems:a}=this.state,s=t.filter((({user:t})=>!t||e.indexOf(t.id)<0)).filter((e=>Object.keys(e).some((e=>a.includes(e)))));return s.length>15?s.slice(0,15):s},this._render=()=>{const{domId:e,savedSearches:t}=this.props,a=0===this._getNumOfSearchItems(),s=this._getRecentSearchItems();return a?n.a.createElement(H.a,{style:Ue.emptyState,testID:we.a.typeaheadEmptySearch},n.a.createElement(Q.b,{align:"center",color:"gray700"},xe)):n.a.createElement(H.a,{accessibilityRole:"listbox",nativeID:e},s.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a,{style:Ue.header,testID:we.a.typeaheadRecentSearchesHeader},n.a.createElement(Q.b,{numberOfLines:1,size:"headline1",weight:"bold"},ke),n.a.createElement(j.a,{onPress:this._handleClearAllClick,size:"xSmall",type:"brandText"},De)),s.map(((e,t)=>this._renderRecentSearchItem(e,t)))):null,t.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a,{accessibilityHidden:!0,style:[Ue.header,Ue.borderTop],testID:we.a.typeaheadSavedSearchesHeader},n.a.createElement(Q.b,{numberOfLines:1,size:"headline1",weight:"bold"},Te)),this._renderSavedSearches()):null)},this._renderRecentSearchItem=(e,t)=>{const{ariaDescendantId:a}=this.props,s=this.state.focusIndex===t;return n.a.createElement(Ee,{domId:s?a:void 0,index:t,item:e,key:this._chooseKeyType(e,t),onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:s?this._setFocusedItemRef:void 0,testID:we.a.typeaheadRecentSearchesItem})},this._chooseKeyType=(e,t)=>e.keyword?`keyword_${e.keyword.query}`:e.user?`user_${e.user.id}`:e.topic?`topic_${e.topic.id}`:e.event?`event_${e.event.id}`:`${t}`,this._renderSavedSearches=()=>{const{ariaDescendantId:e,savedSearches:t}=this.props,{focusIndex:a}=this.state,s=this._getRecentSearchItems(),r=[...t];return r.reverse(),n.a.createElement(H.a,{testID:we.a.typeaheadSavedSearchesContainer},r.map(((t,r)=>{const c=a===r+s.length;return n.a.createElement(Ee,{domId:c?e:void 0,index:r,item:t,key:t.savedSearchId,onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:c?this._setFocusedItemRef:void 0,testID:we.a.typeaheadSavedSearchesItem})})))},this._getNumOfSearchItems=()=>{const{savedSearches:e}=this.props,t=this._getRecentSearchItems();return e.length+t.length},this._handleUsersRetry=()=>{this._fetchUsersDetailsIfNeeded()},this._fetchUsersDetailsIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchUsersIfNeeded:t,fetchUsersPresenceIfNeeded:a,invalidRecentSearchUserIds:s,recentSearches:r}=this.props,{featureSwitches:c,loggedInUserId:n}=this.context,o=((e,t)=>e.map((e=>{var t;return null==e||null==(t=e.user)?void 0:t.id})).filter(Boolean).filter((e=>t.indexOf(e)<0)))(r,s);t(o).catch(e({})),n&&c.isTrue("voice_rooms_recent_search_audiospace_ring_enabled")&&a(o).catch(e({}))},this._handleRemoveQuery=(e,t)=>{const{analytics:a,removeQuery:s}=this.props;switch(e.category){case v.b.RecentSearch:{const r={keyword:e.keyword,user:e.user,topic:e.topic,event:e.event};s(r),this._resetFocus();const c=b.a.forRecentSearchResult(r,t),n=this._handleRemoveAction(e);c&&a.scribe({action:n,data:{items:[c]}});break}case v.b.SavedSearch:this.setState({shouldShowDeleteSavedSearchConfirmation:!0,savedSearchIdToDelete:e.savedSearchId});break;default:return}},this._handleRemoveAction=e=>e.user?"clear_user":e.topic?"clear_topic_interests":e.event?"clear_event":"clear_topic",this._handleClearAllClick=()=>{this.setState({shouldShowClearAllConfirmationSheet:!0})},this._handleOnClearAllConfirm=()=>{const{analytics:e,clearAll:t}=this.props;t(),e.scribeAction("clear_all"),this.setState({shouldShowClearAllConfirmationSheet:!1})},this._handleOnClearAllCancel=()=>{this.setState({shouldShowClearAllConfirmationSheet:!1})},this._handleOnDeleteSavedSearchConfirm=()=>{const{analytics:e,deleteSavedSearch:t,savedSearches:a}=this.props,{savedSearchIdToDelete:s}=this.state,r=a.findIndex((e=>e.savedSearchId===s)),c=a[r];if(s){t(s);const a=c&&b.a.forSavedSearchResult(c.keyword.query,r);a&&e.scribe({element:"saved_search",action:"delete",data:{items:[a]}})}this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})},this._handleOnDeleteSavedSearchCancel=()=>{this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})},this._handleOnItemClick=(e,t)=>{const{onDismiss:a,onItemClick:s}=this.props;s(e,t),this._scribeClick(e,t),a&&a()},this._scribeRecentSearchImpression=()=>{const{analytics:e,recentSearches:t}=this.props;if(t&&t.length){const a=Object(f.a)(t.map(((e,t)=>b.a.forRecentSearchResult(e,t))));e.scribe({action:"impression",data:{items:a}})}},this._scribeSavedSearchImpression=()=>{const{analytics:e,savedSearches:t}=this.props;if(t&&t.length){const a=Object(f.a)(t.map(((e,t)=>b.a.forSavedSearchResult(e.keyword.query,t))));e.scribe({element:"saved_search",action:"impression",data:{items:a}})}},this._scribeClick=(e,t)=>{const{analytics:a}=this.props;switch(e.category){case v.b.SavedSearch:{const s=b.a.forSavedSearchResult(e.query,t);a.scribe({element:"typeahead",action:"click",data:{targets:[s]}});break}case v.b.RecentSearch:{let s;e.recentSearchType&&(s=e.recentSearchType===v.a.User?{user:{type:v.a.User,id:e.query}}:e.recentSearchType===v.a.Event&&e.queryMetadata&&e.queryMetadata.title?{event:{...e.queryMetadata,type:v.a.Event,id:e.query}}:e.recentSearchType===v.a.Topic&&e.queryMetadata&&e.queryMetadata.name?{topic:{...e.queryMetadata,type:v.a.Topic,id:e.query}}:{keyword:{type:v.a.Keyword,query:e.query}});const r=s&&b.a.forRecentSearchResult(s,t);r&&a.scribe({action:"click",data:{targets:[r]}});break}}},this._setFocusedItemRef=e=>{this._focusedItemRef=e,e&&this._shouldScrollToFocusedItem&&(Object(Ce.c)(this._getScrollParent(),this._getFocusedItem()),this._shouldScrollToFocusedItem=!1)},this.hasFocusedItem=()=>this._getNumOfSearchItems()>0,this.selectFocusedItem=()=>{if(this.hasFocusedItem()){const e=this._focusedItemRef&&this._focusedItemRef.searchItemData;e&&this._handleOnItemClick(e,this.state.focusIndex)}},this._setFocusIndex=(e,t)=>{const{onItemFocusChanged:a}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),a&&a()},this._resetFocus=()=>{this._setFocusIndex(-1)},this.focusNext=()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const a=e+1>=t?0:e+1;this._setFocusIndex(a,!0)},this.focusPrevious=()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const a=e-1<0?t-1:e-1;this._setFocusIndex(a,!0)};const{featureSwitches:a}=this.context;var s,r;this.state={focusIndex:0,shouldShowClearAllConfirmationSheet:!1,shouldShowDeleteSavedSearchConfirmation:!1,allowedRecentSearchItems:(s=!0===a.getValueWithoutScribeImpression("responsive_web_recent_searches_topics_enabled"),r=!0===a.getValueWithoutScribeImpression("responsive_web_recent_searches_events_enabled"),[...Oe,s?"topic":"",r?"event":""])},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}componentDidMount(){const{createLocalApiErrorHandler:e,fetchRecentSearchesIfNeeded:t,fetchSavedSearchesIfNeeded:a,recentSearches:s,savedSearches:r}=this.props;t(),a().catch(e({})),this._fetchUsersDetailsIfNeeded(),this._scribeRecentSearchImpression(),this._scribeSavedSearchImpression(),(s&&s.length||r&&r.length)&&this._resetFocus()}componentDidUpdate(e){const{recentSearches:t,savedSearches:a}=this.props;e.recentSearches!==t&&(this._fetchUsersDetailsIfNeeded(),this._resetFocus(),this._scribeRecentSearchImpression()),e.savedSearches!==a&&(this._resetFocus(),this._scribeSavedSearchImpression())}render(){const{fetchStatus:e,style:t}=this.props,{shouldShowClearAllConfirmationSheet:a,shouldShowDeleteSavedSearchConfirmation:s}=this.state;return n.a.createElement(H.a,{style:t},n.a.createElement(O.a,{fetchStatus:e,onRequestRetry:this._handleUsersRetry,render:this._render}),a?n.a.createElement(Ie.a,{confirmButtonLabel:Re.confirmButtonLabel,confirmButtonType:"destructiveFilled",headline:Re.headline,onCancel:this._handleOnClearAllCancel,onConfirm:this._handleOnClearAllConfirm,testID:we.a.deleteRecentSearchesDialog,text:Re.text}):null,s?n.a.createElement(D.a,{onCancel:this._handleOnDeleteSavedSearchCancel,onConfirm:this._handleOnDeleteSavedSearchConfirm}):null)}_getScrollParent(){if(!this._scrollParent){const e=Object(Ce.a)(U.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}_getFocusedItem(){const e=this._focusedItemRef&&U.a.findDOMNode(this._focusedItemRef);return e instanceof Element?e:null}}Le.contextType=te.a;const Ue=P.a.create((e=>({emptyState:{padding:e.spaces.space12,paddingTop:e.spaces.space20},borderTop:{borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:1},header:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingVertical:e.componentDimensions.gutterVertical,paddingHorizontal:e.componentDimensions.gutterHorizontal}})));var Ae=T.forwardRef(Le),Fe="SearchBox_Search_Input",He=a("TnY3"),je=a("GZwR"),Pe=a("4e/K");const Ne=p.a.ib2e46ee,Me=p.a.hbc99b02,qe=/^(\w+)$/,Be=[je.a.Events,je.a.Users,je.a.Topics],ze=e=>"@"===e[0]?e.substring(1):e,Ve={viewType:"search_field"},Qe=["t1","t3"];class Ke extends n.a.Component{constructor(e,t){var a;super(e,t),this._withNewTypeaheadUI=!1,this._flattenResults=(e,t,a,s,r,c,n)=>{const o=Object(je.f)(r,je.b.User),i=Object(je.f)(a,je.b.Topic),l=Object(je.f)(a,je.b.NoResult),h=Object(je.f)(s,je.b.Event),d=[...Object(je.e)(i),...Object(je.e)(o)];let u;u="t1"===this._rankedTypeaheadExperimentalValue?d.sort(((e,t)=>t.rank-e.rank)):"t3"===this._rankedTypeaheadExperimentalValue?(e=>{const t=[...e];for(let a=e.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1)),s=t[e],r=t[a];t[a]=s,t[e]=r}return t})(d):d;const p=u.map((({item:e,rank:t})=>e)),[m,...S]=p,y=[m,...c||[],...S].filter(Boolean),b=[];y.forEach((e=>{const{id:t,type:a}=e;if("user"!==a)b.push(e);else if("prefetch"===e.src){const a=null==r?void 0:r.find((({id:e})=>t===e));a?b.push(a):b.push(e)}else"remote"!==e.src||b.find((({id:e})=>t===e))||b.push(e)}));let f=0;const _=b.filter((({type:e})=>"user"!==e||f<10&&(f+=1,!0)));return _.unshift(...l),_.unshift(...h),n&&_.push(n),e?[e,_]:[_]},this._renderSearchBoxEmptyState=e=>n.a.createElement(Ae,r()({},e,{onItemClick:this._handleSearchItemClick})),this._handleSearchItemClick=({category:e,link:t,query:a,queryMetadata:s,recentSearchType:r})=>{const{addQuery:c}=this.props;e===v.b.SavedSearch?this._submitQuery({query:a,shouldAddToRecentSearch:!1,src:S.a.SavedSearchClick}):r===v.a.Keyword?this._submitQuery({query:a,shouldAddToRecentSearch:!0,src:S.a.RecentSearchClick}):r===v.a.Event?(this._routeTransition({pathname:`/i/events/${a}`}),s&&s.title&&c({event:{...s,id:a,type:v.a.Event}})):r===v.a.Topic?(this._routeTransition({pathname:`/i/topics/${a}`}),s&&s.name&&c({topic:{...s,id:a,type:v.a.Topic}})):t&&(this._routeTransition({pathname:`/${t}`}),c({user:{id:a,type:v.a.User}}))},this._handleSearchShortcut=e=>{const t=this._inputRef;t&&(e&&t.setQuery(e),t.focus())},this._getUserExactMatch=({hasResults:e,isLoaded:t,query:a})=>{const s=ze(a);if(s.match(qe))return{id:`${a}_no_result_user`,type:je.b.NoResult,data:{text:Me({screenName:s}),type:"user"}}},this._handleOnDismiss=()=>{const{history:e}=this.props,{location:t}=e,a=t.state||{};if(a.searchFocused){const s={...t,state:{...a,lockScroll:!1,searchFocused:!1}};e.replace(s)}},this._handleOnFocus=()=>{const{analytics:e,history:t}=this.props,{location:a}=t,s=a.state||{};if(!s.searchFocused){const r={...a,state:{...s,searchFocused:!0,lockScroll:!0}};e.scribe({action:"focus_field"}),t.push(r)}},this._handleChange=e=>{var t;const{history:a}=this.props,{location:s}=a;!this._rankedTypeaheadExperimentalValue&&null!=(t=s.state)&&t.searchFocused&&(this._rankedTypeaheadExperimentalValue=this.context.featureSwitches.getStringValue("responsive_web_ranked_typeahead","t2")),this.setState({query:e})},this._handleTypeaheadSubmit=()=>{const{items:e,query:t}=this.state,{analytics:a}=this.props;/^\s*$/.test(t)||(a.scribe({action:"search",data:{items:b.a.forTypeaheadResults(e),search_details:{query:t}}}),this._submitQuery({query:t,shouldAddToRecentSearch:!0}))},this._handleItemClick=(e,t)=>{const{addQuery:a}=this.props,{query:s}=this.state;switch(e.type){case je.b.User:if(e.data.id_str){a({user:{id:e.data.id_str,type:v.a.User}})}this._routeTransition({pathname:`/${e.data.screen_name}`});break;case je.b.Topic:case je.b.Hashtag:this._submitQuery({query:e.data.topic,shouldAddToRecentSearch:!0,src:S.a.TypeaheadClick});break;case je.b.Event:e.data&&e.data.url?this._routeTransition({pathname:m.b.parseInternalUrl(e.data.url)}):this._submitQuery({query:e.data.topic,src:S.a.TypeaheadClick});break;case je.b.NoResult:{const{type:t}=e.data;"user"===t?this._routeTransition({pathname:`/${ze(s)}`}):"topic"===t&&this._submitQuery({query:s,shouldAddToRecentSearch:!0,src:S.a.TypeaheadClick});break}}},this._handleItemsChanged=e=>{this.setState({items:e})},this._routeTransition=({params:e,pathname:t,query:a,src:s})=>{const{history:r,location:c}=this.props,n={...c,pathname:t,search:"",query:e||(a?{q:a,src:s}:{}),state:{...c.state,searchFocused:!1,lockScroll:!1}};r.replace(n)},this._submitQuery=({query:e,shouldAddToRecentSearch:t=!1,src:a=S.a.Typed})=>{const{addQuery:s,mode:r,onSubmit:c,searchFilters:n,searchRoute:o}=this.props;if(c&&c(e,a,this.state.lastSubmittedQuery===e),t){s({keyword:{query:e,type:v.a.Keyword}})}const i=Object(v.g)({query:e,querySrc:a,mode:r,searchFilters:n});this._routeTransition({pathname:o,params:i,src:a}),this.setState({lastSubmittedQuery:e})},this._setInputRef=e=>{this._inputRef=e},this.state={query:e.initialValue,items:[],lastSubmittedQuery:Object(d.a)(null==(a=e.location.query)?void 0:a.q)},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}componentDidMount(){const{shouldHandleSearchShortcut:e}=this.props;e&&(this._unregisterSearchShortcutHandler=Object(y.b)(this._handleSearchShortcut))}componentWillUnmount(){this._unregisterSearchShortcutHandler&&this._unregisterSearchShortcutHandler()}render(){const{forceVdlDisable:e,isCompact:t,isInSidebar:a,isOnHomepage:s,location:r,placeholder:c}=this.props,{query:i}=this.state,{searchPrefill:l}=r.state||{},h=this.props.initialValue||l,d=!!r.state&&!!r.state.searchFocused,u=Qe.includes(this._rankedTypeaheadExperimentalValue);return n.a.createElement(o.a,{behavioralEventContext:Ve},n.a.createElement(H.a,{style:$e.root},n.a.createElement(Pe.default,{filter:Be,forceVdlDisable:e,getTopicExactMatch:i?je.h:void 0,getUserExactMatch:i?this._getUserExactMatch:void 0,initialValue:h,inputStyle:$e.input,isCompact:t,isInSidebar:a,isOnHomepage:s,onDismiss:this._handleOnDismiss,onFocus:this._handleOnFocus,onItemClick:this._handleItemClick,onItemsChanged:this._handleItemsChanged,onQueryChange:this._handleChange,onSubmit:this._handleTypeaheadSubmit,orderResults:u?this._flattenResults:void 0,placeholder:c,ref:this._setInputRef,renderEmptyState:this._renderSearchBoxEmptyState,rounded:!0,shouldAutoFocus:d,shouldClearOnSelect:!0,shouldDeferPrefetch:!0,source:je.d.SearchBox,testID:Fe,withFixedPositioning:!0,withFocusStyling:!0,withSectionDivider:!this._withNewTypeaheadUI})))}}Ke.defaultProps={initialValue:"",isInSidebar:!1,placeholder:Ne,searchRoute:"/search",forceVdlDisable:!0},Ke.contextType=te.a;const $e=P.a.create((e=>({root:{alignItems:"stretch",flexBasis:0,flexDirection:"row",flexGrow:1},input:{flexShrink:1}})));t.default=Object(He.a)(h(Ke))},FITr:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("Lsrn"),n=a("k/Ka");const o=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M20.235 14.61c-.375-1.745-2.342-3.506-4.01-4.125l-.544-4.948 1.495-2.242c.157-.236.172-.538.037-.787-.134-.25-.392-.403-.675-.403h-9.14c-.284 0-.542.154-.676.403-.134.25-.12.553.038.788l1.498 2.247-.484 4.943c-1.668.62-3.633 2.38-4.004 4.116-.04.16-.016.404.132.594.103.132.304.29.68.29H8.64l2.904 6.712c.078.184.26.302.458.302s.38-.118.46-.302l2.903-6.713h4.057c.376 0 .576-.156.68-.286.146-.188.172-.434.135-.59z"})));o.metadata={width:24,height:24},t.a=o},Nqmc:function(e,t,a){"use strict";var s=a("SV7d"),r=a("ERkP"),c=a.n(r),n=a("t62R"),o=a("5mJL"),i=a("nBUg"),l=a("qjak"),h=a("dC06"),d=a("rHpw"),u=a("XIXT"),p=a("yDX5"),m=a("MWbm");const S={viewType:"social_context"};class y extends c.a.PureComponent{render(){const{avatarSize:e,bottomControl:t,iconStyle:a,nativeID:r,onLayout:h,rightControl:d,style:u,testID:p,textColor:y,textSize:f,topControl:_,weight:v,withBottomBorder:g,withLeftPadding:E,withTextCentered:w,...I}=this.props,{Icon:C,accessibilityLabel:x,link:R,text:k}=Object(l.a)(I),T=c.a.createElement(n.b,{accessibilityLabel:x,color:y,nativeID:r,numberOfLines:2,size:f,testID:p,weight:v},k),{cellStyle:D,viewStyle:O}=this._getStyles();return k?c.a.createElement(i.b.UseProps,null,(r=>c.a.createElement(s.a,{behavioralEventContext:S},c.a.createElement(c.a.Fragment,null,_||null,c.a.createElement(m.a,{onLayout:h,style:[u,O,r.socialContextRefreshEnabled()&&!E&&b.socialContextRefresh]},c.a.createElement(o.a,{avatarCell:C||(E?null:void 0),avatarCellStyle:[a,b.socialContextIconColumn,!E&&b.unsetIconWidth,r.socialContextRefreshEnabled()&&!E&&b.socialContextRefreshIcon],avatarSize:e,cellStyle:D},c.a.createElement(m.a,{style:b.cellWrapper},c.a.createElement(m.a,{style:[b.socialContextTextColumn,r.socialContextRefreshEnabled()&&!E&&b.socialContextRefreshTextColumn]},R?this._renderLink(R,T):T),d||null)),t||null))))):null}_renderLink(e,t){const{contextType:a,nativeID:s,onClick:r,retweetData:o,textColor:i,topicData:l}=this.props,{screenName:d}=o||{},m=c.a.createElement(n.b,{color:i,link:e,nativeID:s,onClick:r},t);return a===h.a.Topic&&l?c.a.createElement(u.a,{topicId:l.topicId},m):a===h.a.Retweet&&d?c.a.createElement(p.a,{screenName:d},m):m}_getStyles(){const{bottomControl:e,contextType:t,withBottomBorder:a,withTextCentered:s}=this.props,r=t===h.a.TextOnly,c=a?[b.bottomBorderMargin,e&&b.bottomBorder]:[],n=a&&!e?[b.bottomBorder]:[];return r&&n.push(b.topicContext),s&&n.push(b.socialContextTextCentered),{viewStyle:c,cellStyle:n}}}y.defaultProps={iconSize:"small",textColor:"gray700",textSize:"subtext2",withBottomBorder:!1,withLeftPadding:!0,withTextCentered:!1};const b=d.a.create((e=>({socialContextIconColumn:{alignItems:"flex-end",justifyContent:"center"},bottomBorderMargin:{marginBottom:e.componentDimensions.gutterVertical},cellWrapper:{flexDirection:"row"},bottomBorder:{paddingBottom:e.spaces.space4,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},topicContext:{paddingBottom:`calc(${e.spaces.space4} + ${e.spaces.space2})`},socialContextTextColumn:{alignItems:"flex-start",flexShrink:1,justifyContent:"center"},unsetIconWidth:{flexBasis:"unset"},socialContextRefreshIcon:{marginRight:e.spaces.space8},socialContextRefresh:{marginBottom:e.spaces.space8},socialContextRefreshTextColumn:{minHeight:e.spaces.space32},socialContextTextCentered:{justifyContent:"center"}})));t.a=y},aPcQ:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("Lsrn"),n=a("k/Ka");const o=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M20 16H5.81l2.72-2.72c.294-.293.294-.768 0-1.06s-.767-.294-1.06 0l-4 4c-.293.292-.293.767 0 1.06l4 4c.146.147.338.22.53.22s.384-.073.53-.22c.293-.293.293-.768 0-1.06L5.81 17.5H20c.414 0 .75-.337.75-.75S20.414 16 20 16zm.53-9.28l-4-4c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l2.72 2.72H4c-.414 0-.75.337-.75.75S3.586 8 4 8h14.19l-2.72 2.72c-.294.293-.294.768 0 1.06.146.147.338.22.53.22s.384-.073.53-.22l4-4c.293-.293.293-.767 0-1.06z"})));o.metadata={width:24,height:24},t.a=o},dC06:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("ERkP");const s=Object.freeze({Community:"Community",Pin:"Pin",Retweet:"Retweet",Like:"Like",Follow:"Follow",Moment:"Moment",NewTweets:"NewTweets",Reply:"Reply",Conversation:"Conversation",TextOnly:"TextOnly",Facepile:"Facepile",Feedback:"Feedback",Topic:"Topic",List:"List",Location:"Location",Megaphone:"Megaphone",Bird:"Bird",NewUser:"NewUser",SmartBlockExpiration:"SmartBlockExpiration",FollowMutual:"FollowMutual",FollowFollowing:"FollowFollowing",FollowFollowed:"FollowFollowed",SocialProof:"SocialProof",Spaces:"Spaces",Sparkle:"Sparkle",Trending:"Trending"})},hiGS:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("Lsrn"),n=a("k/Ka");const o=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M20.746 5.236h-3.75V4.25c0-1.24-1.01-2.25-2.25-2.25h-5.5c-1.24 0-2.25 1.01-2.25 2.25v.986h-3.75c-.414 0-.75.336-.75.75s.336.75.75.75h.368l1.583 13.262c.216 1.193 1.31 2.027 2.658 2.027h8.282c1.35 0 2.442-.834 2.664-2.072l1.577-13.217h.368c.414 0 .75-.336.75-.75s-.335-.75-.75-.75zM8.496 4.25c0-.413.337-.75.75-.75h5.5c.413 0 .75.337.75.75v.986h-7V4.25zm8.822 15.48c-.1.55-.664.795-1.18.795H7.854c-.517 0-1.083-.246-1.175-.75L5.126 6.735h13.74L17.32 19.732z"}),r.a.createElement("path",{d:"M10 17.75c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75zm4 0c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75z"})));o.metadata={width:24,height:24},t.a=o},kIAd:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c}));var s=a("0vv5");const r=500,c={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:a.n(s).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},oEoC:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"a",(function(){return h})),a.d(t,"d",(function(){return d})),a.d(t,"f",(function(){return p}));a("kYxP");var s=a("oQhu"),r=a("kIAd"),c=a("rHpw");function n(e,t){let a;const s=r.b.scoper.find((s=>{if(-1!==s.srcInputs.indexOf(t))return a=e.match(s.regexp),a}));let c="";return a&&(c=a&&(1===a.length?a[0]:a[1])),s?{...s.scope,src:t,q:c}:null}function o(e,t){const a=t.slice(0,e),s=t.slice(e,t.length),c=a.search(r.b.WordEnd),n=c>=0?a.slice(c):"",o=s.search(r.b.WordBoundary),i=n+s.slice(0,o);return i.trim()?{start:c,end:e+o,word:i}:{start:-1,end:-1,word:""}}function i(){return`typeaheadFocus-${Math.random()}`}function l(e){const{altKey:t,ctrlKey:a,metaKey:s}=e;return!(t||a||s)}function h(e,t){const a=[];e.forEach((e=>{const s=t.find((t=>t.id===e.id));s&&s.data&&s.data.result_context?a.push(s):a.push(e)}));const s=a.map((e=>e.id)),r=t.filter((e=>s.indexOf(e.id)<0));return[...a,...r]}const d=Object(s.a)((e=>({bottom:0,paddingBottom:`calc(2.5 * ${c.a.theme.spaces.space64})`,position:"fixed",top:`${e}px`,transform:[{translate3d:"0,0,0"}]})));let u=0;const p=()=>(u+=1,`typeaheadDropdown-${u}`)},qjak:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("t62R"),n=a("MAI/"),o=a("shC7"),i=a("dC06"),l=a("rHpw"),h=a("3XMw"),d=a.n(h),u=a("FITr"),p=a("yVEN"),m=a("uCrx"),S=a("6ZHn"),y=a("GcQN"),b=a("x0mb"),f=a("Hp3u"),_=a("Lsrn"),v=a("k/Ka");const g=(e={})=>Object(v.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M19.75 2H4.25C3.01 2 2 3.01 2 4.25v13.003c0 1.24 1.01 2.25 2.25 2.25h4.56l2.59 3.45c.142.19.364.3.6.3.235 0 .457-.11.598-.3l2.588-3.45h4.563c1.24 0 2.25-1.01 2.25-2.25V4.25C22 3.01 20.99 2 19.75 2zM6.963 12.375c-.76 0-1.375-.616-1.375-1.375s.616-1.375 1.375-1.375S8.338 10.24 8.338 11s-.616 1.375-1.375 1.375zm4.85 0c-.76 0-1.375-.616-1.375-1.375s.616-1.375 1.375-1.375 1.375.616 1.375 1.375-.616 1.375-1.375 1.375zm4.85 0c-.76 0-1.375-.616-1.375-1.375s.616-1.375 1.375-1.375c.76 0 1.375.616 1.375 1.375s-.616 1.375-1.375 1.375z"})));g.metadata={width:24,height:24};var E=g,w=a("EHV7"),I=a("wpLu"),C=a("EfHu"),x=a("cOhU"),R=a("cap5"),k=a("r9x5");const T=(e={})=>Object(v.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm3.75 12.257c-.038 0-.074-.003-.11-.008l-3.667-.54s-.28-.048-.292-.053c-.343-.07-.602-.372-.602-.735V6.417c0-.414.336-.75.75-.75s.75.336.75.75v5.115l3.28.483c.41.06.692.44.632.852-.055.372-.375.64-.74.64z"})));T.metadata={width:24,height:24};var D=T,O=a("0qK0"),L=a("aPcQ");const U=(e={})=>Object(v.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M8.417 11.816c1.355 0 2.872-.15 3.84-1.256.813-.93 1.077-2.367.806-4.392-.38-2.826-2.116-4.513-4.645-4.513-2.53 0-4.267 1.687-4.646 4.513-.273 2.025-.01 3.462.805 4.393.968 1.108 2.485 1.257 3.84 1.257zm8.28 7.42c-.88-3.526-4.283-5.99-8.28-5.99-3.998 0-7.403 2.464-8.28 5.99-.172.692-.03 1.4.395 1.94.408.52 1.04.82 1.733.82H14.57c.69 0 1.323-.3 1.73-.82.425-.54.568-1.246.396-1.94zM23.24 3.47h-5.624l1.64-1.642c.315-.316.315-.827 0-1.143-.316-.315-.826-.316-1.143 0l-2.96 2.96c-.16.16-.238.366-.238.572 0 .207.08.414.237.57l2.96 2.962c.16.156.365.234.572.234s.413-.08.57-.236c.316-.316.316-.828 0-1.144l-1.64-1.64h5.623c.414 0 .75-.336.75-.75s-.334-.747-.748-.747z"})));U.metadata={width:24,height:24};var A=U,F=a("lUZE");const H=d.a.jb767df7,j=d.a.bb3323fa,P=d.a.db0798ed,N=d.a.dc716ec8,M=e=>r.a.createElement(c.b,{dir:o.a.getConstants().isRTL?"rtl":"ltr",withHashflags:!0},e),q=(e,t)=>t?H:(e=>{const t=M(e);return r.a.createElement(d.a.I18NFormatMessage,{$i18n:"h99e9c95"},t)})(e),B=l.a.create((e=>({small:{height:e.lineHeights.subtext3,width:e.lineHeights.subtext3},large:{height:e.lineHeights.subtext1,width:e.lineHeights.subtext1},xLarge:{height:e.lineHeights.headline1,width:e.lineHeights.headline1}}))),z=l.a.create((e=>({circle:{color:e.colors.primary,width:"0.5em"},colorDeepGray:{color:e.colors.gray700},colorBlue:{color:e.colors.blue500},colorGreen:{color:e.colors.green500},colorOrange:{color:e.colors.orange500},colorPrimary:{color:e.colors.primary},colorRed:{color:e.colors.magenta500},grayscaleImage:{borderRadius:e.borderRadii.infinite,filter:"grayscale(100%)"},brandColor:{color:e.colors.brandColor}})));t.a=({contextType:e,iconSize:t,link:a,retweetData:s,text:c,topicData:o,userAvatarUrls:l})=>{const{isSelfRetweet:h,name:d,screenName:_}=s||{},v=((e,t,a=[])=>{const s=B[t],c=[z.colorDeepGray,s],o=r.a.createElement(u.a,{style:c}),l=r.a.createElement(p.a,{style:c}),h=r.a.createElement(m.a,{style:c}),d=r.a.createElement(S.a,{style:c}),_=r.a.createElement(y.a,{style:c}),v=r.a.createElement(b.a,{style:z.circle}),g=r.a.createElement(f.a,{style:c}),T=r.a.createElement(E,{style:c}),U=r.a.createElement(w.a,{style:c}),H=r.a.createElement(I.a,{style:c}),j=r.a.createElement(C.a,{style:c}),P=r.a.createElement(x.a,{style:c}),N=r.a.createElement(R.a,{style:c}),M=r.a.createElement(k.a,{style:c}),q=r.a.createElement(D,{style:c}),V=r.a.createElement(O.a,{style:c}),Q=r.a.createElement(L.a,{style:c}),K=r.a.createElement(A,{style:c}),$=r.a.createElement(n.a,{borderColor:"cellBackground",userAvatarSize:t,userAvatarUrls:a}),W=r.a.createElement(F.a,{style:c});switch(e){case i.a.Pin:return o;case i.a.Retweet:return l;case i.a.Like:return h;case i.a.Follow:return d;case i.a.Moment:return _;case i.a.NewTweets:return v;case i.a.Reply:case i.a.Conversation:return g;case i.a.Feedback:return T;case i.a.Topic:return U;case i.a.List:return H;case i.a.Location:return j;case i.a.Community:return P;case i.a.Spaces:return N;case i.a.Sparkle:return M;case i.a.SmartBlockExpiration:return q;case i.a.SocialProof:case i.a.FollowFollowed:return K;case i.a.FollowMutual:return Q;case i.a.FollowFollowing:return V;case i.a.Facepile:return $;case i.a.Bird:return W;case i.a.TextOnly:default:return null}})(e,t,l);switch(e){case i.a.Retweet:return{Icon:v,text:c||q(d,h),link:_?`https://twitter.com/${_}`:void 0};case i.a.Pin:return{Icon:v,text:c||j};case i.a.Topic:return{Icon:v,accessibilityLabel:"Recommendation"===(null==o?void 0:o.functionalityType)||"RecWithEducation"===(null==o?void 0:o.functionalityType)?N({topicName:c}):P({topicName:c}),text:c?M(c):null,link:a};default:return{Icon:v,text:c?M(c):null,link:a}}}},r9x5:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("Lsrn"),n=a("k/Ka");const o=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M22.772 10.506l-5.618-2.192-2.16-6.5c-.102-.307-.39-.514-.712-.514s-.61.207-.712.513l-2.16 6.5-5.62 2.192c-.287.112-.477.39-.477.7s.19.585.478.698l5.62 2.192 2.16 6.5c.102.306.39.513.712.513s.61-.207.712-.513l2.16-6.5 5.62-2.192c.287-.112.477-.39.477-.7s-.19-.585-.478-.697zM7.413 4.562c0-.414-.336-.75-.75-.75h-1.88V2.05c0-.414-.337-.75-.75-.75s-.75.336-.75.75v1.762H1.5c-.414 0-.75.336-.75.75s.336.75.75.75h1.782v1.762c0 .414.336.75.75.75s.75-.336.75-.75V5.312h1.88c.415 0 .75-.336.75-.75zm1.785 14.872h-1.1v-1.016c0-.414-.335-.75-.75-.75s-.75.336-.75.75v1.016H5.57c-.414 0-.75.336-.75.75s.336.75.75.75H6.6v1.016c0 .414.335.75.75.75s.75-.336.75-.75v-1.016h1.098c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"})));o.metadata={width:24,height:24},t.a=o},rRIm:function(e,t,a){"use strict";a.d(t,"b",(function(){return T}));a("kYxP");var s=a("ERkP"),r=a.n(s),c=a("sTyV"),n=a("6/RC"),o=a("sebV"),i=a("G6rE"),l=a("rxPX"),h=Object(l.a)().propsFromState((()=>({loggedInUser:i.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({loggedInUserScreenName:e?e.screen_name:void 0}))),d=a("3XMw"),u=a.n(d),p=a("OrGc"),m=a("QK5w"),S=a("aITJ"),y=a("MWbm"),b=a("TnY3"),f=a("rHpw"),_=a("t62R"),v=a("v6aA"),g=a("uScj"),E=a("fs1G"),w=a("BcsE"),I=a("VPAj");const C=u.a.b47e760d,x=u.a.fd2c7b43,R=new g.a,k=e=>{if(e.target instanceof HTMLInputElement){const t=e.target.tagName.toLowerCase();return"input"===t||"textarea"===t}return!1},T=e=>{if(!n.canUseDOM)return E.a;return R.subscribe(e).unsubscribe};class D extends r.a.Component{constructor(...e){super(...e),this._bindKeyboardShortcuts=()=>{const{history:e,loggedInUserScreenName:t}=this.props,a=t=>a=>{a.preventDefault(),R.getListeners().length?R.notify(t):e.push({pathname:"/explore",state:{searchFocused:!0,searchPrefill:t}})},s={[p.e.search]:a(),[p.e.goToUser]:a("@"),[p.e.openKeyboardShortcuts]:()=>e.push("/i/keyboard_shortcuts"),[p.e.goExplore]:()=>e.push("/explore"),[p.e.goSettings]:()=>e.push("/settings")},r=t=>({[p.e.goProfile]:()=>e.push(`/${t}`),[p.e.goLikes]:()=>e.push(`/${t}/likes`),[p.e.goLists]:()=>e.push(`/${t}/lists`)}),n=this.context.userClaims.isTrueAndEnabled("subscriptions_feature_1007"),o=t&&n?{...r(t),[p.e.goTopArticles]:()=>e.push("/i/articles")}:t?r(t):{},i={...s,...o,[p.e.goHome]:()=>e.push("/home"),[p.e.goDisplay]:()=>e.push("/i/display"),[p.e.goNotifications]:()=>e.push("/notifications"),[p.e.goMentions]:()=>e.push("/notifications/mentions"),[p.e.goMessages]:()=>e.push("/messages"),[p.e.newMessage]:()=>e.push("/messages/compose"),[p.e.newTweet]:()=>e.push("/compose/tweet"),[p.e.goMomentMaker]:()=>e.push("/i/moment_maker"),[p.e.goBookmarks]:()=>e.push("/i/bookmarks")},l=this.props.loggedInUserScreenName?i:s;this._unbindKeyboardShortcuts=Object(c.a)(l)},this._handleKeyDown=e=>{k(e)||"Backspace"!==e.key||(this._backspaceDown=Date.now(),e.preventDefault(),e.stopPropagation())},this._handleKeyUp=e=>{if(!k(e)&&"Backspace"===e.key){e.preventDefault(),e.stopPropagation();const t=this._backspaceDown,a=!!Object(w.a)(t)&&Date.now()-t<500,s=Object(m.a)({},{location:this.props.location});a&&s?this.props.history.goBack():window.close()}}}componentDidMount(){this._bindKeyboardShortcuts(),S.b.isKaiOS()&&o.a.isStandaloneApp()&&(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp))}componentWillUnmount(){this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts(),S.b.isKaiOS()&&o.a.isStandaloneApp()&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp))}render(){return this.props.loggedInUserScreenName?r.a.createElement(y.a,{accessibilityLevel:2,accessibilityRole:"heading",style:f.a.visuallyHidden},r.a.createElement(_.b,null,C),r.a.createElement(_.b,{focusable:!1,link:"/i/keyboard_shortcuts"},x)):null}}D.contextType=v.a;const O=h(D),L=n.canUseDOM?Object(b.a)(O):Object(I.a)(null);t.a=L},sYRn:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("eb3s"),n=a("3XMw"),o=a.n(n),i=a("4ZbN");const l=o.a.hffea05c,h=o.a.j037e373,d=o.a.d96cf7cd;t.a=({onCancel:e,onConfirm:t})=>r.a.createElement(c.a,{confirmButtonLabel:d,confirmButtonType:"destructiveFilled",headline:l,onCancel:e,onConfirm:t,testID:i.a.deleteSavedSearchDialog,text:h})},u3ZE:function(e,t,a){"use strict";t.a={AdvancedSearchPage:"advanced_search_page",CashtagClick:"cashtag_click",HashtagClick:"hashtag_click",PromotedTrendClick:"promoted_trend_click",RecentSearchClick:"recent_search_click",SavedSearchClick:"saved_search_click",RelatedQueryClick:"related_query_click",SpellingCorrectionClick:"spelling_correction_click",SpellingCorrectionRevertClick:"spelling_suggestion_revert_click",SpellingExpansionClick:"spelling_expansion_click",SpellingExpansionRevertClick:"spelling_expansion_revert_click",SpellingSuggestionClick:"spelling_suggestion_click",TrendClick:"trend_click",TrendView:"trend_view",TypeaheadClick:"typeahead_click",Typed:"typed_query",TweetDetailQuoteTweet:"tdqt"}},v4XE:function(e,t,a){"use strict";a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return S})),a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return b}));a("kYxP");var s=a("oEOe"),r=a("kGix"),c=a("Ssj5"),n=a("SrIh"),o=a("RqPI");const i="savedSearches",l={fetchStatus:r.a.NONE,savedSearches:[]},h=Object.freeze({REQUEST:"rweb/savedSearches/FETCH_SAVED_SEARCHES_REQUEST",SUCCESS:"rweb/savedSearches/FETCH_SAVED_SEARCHES_SUCCESS",FAILURE:"rweb/savedSearches/FETCH_SAVED_SEARCHES_FAILURE"}),d=Object.freeze({REQUEST:"rweb/savedSearches/SAVE_SEARCH_REQUEST",SUCCESS:"rweb/savedSearches/SAVE_SEARCH_SUCCESS",FAILURE:"rweb/savedSearches/SAVE_SEARCH_FAILURE"}),u=Object.freeze({REQUEST:"rweb/savedSearches/DELETE_SAVED_SEARCH_REQUEST",SUCCESS:"rweb/savedSearches/DELETE_SAVED_SEARCH_SUCCESS",FAILURE:"rweb/savedSearches/DELETE_SAVED_SEARCH_FAILURE"});function p(e=l,t){switch(t.type){case h.SUCCESS:{const a=t.payload,s=Array.isArray(a);return s||Object(n.a)("Saved search results are not type array",{extra:{savedSearchResultsType:typeof a}}),{...e,fetchStatus:r.a.LOADED,savedSearches:s&&a?a:[]}}case h.FAILURE:return{...e,fetchStatus:r.a.FAILED};case d.SUCCESS:return{...e,savedSearches:t.payload?[...e.savedSearches,t.payload]:e.savedSearches};case u.SUCCESS:return t.payload?{...e,savedSearches:e.savedSearches.filter((e=>e.id_str!==t.payload.id_str))}:e;default:return e}}c.a.register({[i]:p});const m=e=>e.savedSearches.savedSearches,S=e=>(t,a,{api:r})=>Object(s.b)(t,{request:r.SavedSearches.create,params:{query:e}})({actionTypes:d,context:"SAVE_SEARCH"}),y=e=>(t,a,{api:r})=>Object(s.b)(t,{request:r.SavedSearches.destroy,params:{id:e}})({actionTypes:u,context:"DELETE_SAVED_SEARCH"}),b=()=>(e,t,{api:a})=>{const c=t();if(!Object(o.n)(c))return Promise.resolve();return(e=>e.savedSearches.fetchStatus)(c)===r.a.LOADED?Promise.resolve():e(((e,t,{api:a})=>Object(s.b)(e,{request:a.SavedSearches.fetch,params:{}})({actionTypes:h,context:"FETCH_SAVED_SEARCHES"})))}},wtjx:function(e,t,a){"use strict";a.d(t,"g",(function(){return h})),a.d(t,"f",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return y})),a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return v})),a.d(t,"c",(function(){return g}));var s=a("Ssj5"),r=a("RqPI");const c="recentSearches",n="rweb.recentSearches",o=e=>(t,a,{userPersistence:s})=>s.set(n,{recentSearches:e}).catch((()=>{Promise.resolve()})),i=(e,t)=>{let a=[];if(e&&e.user){const s=e.user;a=t.filter((e=>e.keyword||e.topic||e.event||e.user&&e.user.id!==s.id))}else if(e&&e.topic){const s=e.topic;a=t.filter((e=>e.keyword||e.user||e.event||e.topic&&e.topic.id!==s.id))}else if(e&&e.event){const s=e.event;a=t.filter((e=>e.keyword||e.user||e.topic||e.event&&e.event.id!==s.id))}else if(e&&e.keyword){const s=e.keyword;a=t.filter((e=>e.keyword&&e.keyword.query!==s.query||e.user||e.topic||e.event))}return a},l={fetched:!1,recentSearches:[]};const h=e=>e.recentSearches.recentSearches,d=e=>h(e)[0]||null,u=e=>e.recentSearches.fetched,p="rweb/recentSearches/INIT_FROM_CACHE",m=e=>({type:p,payload:e}),S="rweb/recentSearches/REMOVE_QUERY",y=e=>(t,a,{userPersistence:s})=>{t({payload:e,type:S});const c=a().recentSearches;return Object(r.n)(a())?t(o(c.recentSearches)):Promise.resolve()},b="rweb/recentSearches/CLEAR_ALL",f=()=>(e,t,{userPersistence:a})=>{e({type:b});const s=t().recentSearches;return Object(r.n)(t())?e(o(s.recentSearches)):Promise.resolve()},_="rweb/recentSearches/ADD_QUERY",v=e=>(t,a,{userPersistence:s})=>{t({payload:e,type:_});const c=a().recentSearches;return Object(r.n)(a())?t(o(c.recentSearches)):Promise.resolve()},g=()=>(e,t,{userPersistence:a})=>t().recentSearches.fetched?Promise.resolve():e(((e,t,{userPersistence:a})=>{const s=t();return Object(r.n)(s)?a.get(n).then((t=>{e(m(t))})).catch((()=>{e(m())})):(e(m()),Promise.resolve())}));s.a.register({[c]:function(e=l,t){switch(t.type){case _:{const a=t.payload,s=a?i(a,e.recentSearches):[];return s.length>49&&s.splice(49,1),a&&s.unshift(a),{...e,recentSearches:s}}case S:{const a=t.payload,s=a?i(a,e.recentSearches):[];return{...e,recentSearches:s}}case b:return{fetched:!0,recentSearches:[]};case p:return{...e,...t.payload,fetched:!0};default:return e}}})},x0mb:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("Lsrn"),n=a("k/Ka");const o=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M12 22.75C6.072 22.75 1.25 17.928 1.25 12S6.072 1.25 12 1.25 22.75 6.072 22.75 12 17.928 22.75 12 22.75z"})));o.metadata={width:24,height:24},t.a=o}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.Typeahead~bundle.LoggedOutHome~bundle.Search.497d81a5.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{UnyZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a=Object.freeze({Active:"active",Expand:"expand",Remove:"remove"})},V2l4:function(e,t,s){"use strict";s.r(t),s.d(t,"UserPicker",(function(){return f})),s.d(t,"finalGetItemIsDisabled",(function(){return I})),s.d(t,"getFinalItemDisabledMessage",(function(){return _}));var a=s("ERkP"),o=s.n(a),r=s("ZcYN"),n=s("3XMw"),i=s.n(n),l="searchPeople",c=s("4e/K"),d=s("MWbm"),p=s("jhWN"),h=s("aV/s"),m=s("rHpw"),u=s("GZwR");const y=[u.a.Users],g=i.a.fc9dd578,b=i.a.gdb7bc24;class f extends o.a.Component{constructor(e,t){super(e,t),this._renderSelectedUsersList=()=>{const{selectedUsers:e}=this.props;return o.a.createElement(d.a,{style:x.selectedUsersList},e.map(this._renderSelectedUserPill))},this._renderSelectedUserPill=e=>{const{withCompactPills:t}=this.props,s=this.props.onRemove.bind(this,e),a=e.type===u.b.User?o.a.createElement(p.a,{accessibilityHidden:!0,focusable:!1,size:"custom",uri:e.data.profile_image_url_https}):void 0;return o.a.createElement(h.a,{accessibilityLabel:b({name:e.data.name}),avatar:a,compact:t,key:e.id,mode:"remove",onClick:s,style:x.selectionPill,text:e.data.name})},this._getItemIsDisabled=e=>{const{getItemIsDisabled:t,preselectedUsers:s}=this.props;return I(e,t,s)},this._getItemDisabledMessage=e=>{const{getItemDisabledMessage:t,preselectedUsers:s}=this.props;return _(e,t,s)},this._handleQueryChange=e=>{const{onQueryChange:t}=this.props;this.setState({query:e}),t&&t(e)},this._handleOnSelect=e=>{const{onSelect:t}=this.props;t&&t(e)},this.state={query:""}}render(){const{injections:e,preselectedUsers:t,renderCallout:s,renderHeader:a,selectedUsers:n,shouldAutoFocus:i,source:p}=this.props,h=n.map((({id:e})=>e)).concat(t);return o.a.createElement(d.a,{style:x.root},o.a.createElement(c.default,{alwaysOpen:!0,disableClearButton:!0,filter:y,getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injectedItems:e,isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:g,renderCallout:s,renderHeader:a,renderInSearchField:n.length?this._renderSelectedUsersList:void 0,renderUserDecoration:r.a,selectedItems:h,shouldAutoFocus:i,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:p,testID:l,withSectionDivider:!1}))}}f.defaultProps={preselectedUsers:[],shouldAutoFocus:!0,withCompactPills:!1};const w=(e,t)=>t.indexOf(e)>=0,I=(e,t,s)=>w(e.id,s)||!(!t||!t(e)),_=(e,t,s)=>{if(!w(e.id,s)&&t)return t(e)},x=m.a.create((e=>({root:{flex:1},selectionPill:{margin:e.spaces.space4,maxWidth:`calc(100% - ${e.spaces.space16})`},selectedUsersList:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.space4}})));t.default=f},"aV/s":function(e,t,s){"use strict";s("kYxP");var a=s("ERkP"),o=s.n(a),r=s("t62R"),n=s("3XMw"),i=s.n(n),l=s("I4+6"),c=s("cm6r"),d=s("UnyZ"),p=s("rHpw"),h=s("MWbm"),m=s("hOZg"),u=s("iY63"),y=s("IMYl");const g={active:i.a.e557ad8d,expand:i.a.e3a58c27,remove:i.a.h517e8d8};class b extends o.a.PureComponent{constructor(...e){super(...e),this._handleSecondaryClick=()=>{const{secondaryAction:e}=this.props;e&&e.onSecondaryClick()}}render(){const{accessibilityLabel:e,avatar:t,compact:s,disabled:a,link:n,mode:i,onClick:d,secondaryAction:m,selected:u,style:y,text:b}=this.props,w=this._renderIcon(!0,i),I=m&&this._renderIcon(!1,m.mode),_=[f.root,s&&f.compact,a&&f.disabled,u&&f.selected,y],x=[f.content,w&&f.withIcon,t&&(s&&f.withAvatarImageCompact||f.withAvatarImage)],C=l.a.generate({backgroundColor:u?p.a.theme.colors.primary:"transparent",color:u?p.a.theme.colors.white:p.a.theme.colors.primary});return o.a.createElement(h.a,{style:_},o.a.createElement(c.a,{accessibilityLabel:e||(i?g[i]:""),disabled:a,interactiveStyles:C,link:n,onPress:d,style:x},this._renderAvatar(),o.a.createElement(r.b,{color:u?"whiteOnColor":"text",numberOfLines:1,selectable:!1,style:f.text,weight:"bold"},b),w),m?o.a.createElement(c.a,{accessibilityLabel:m.accessibilityLabel||(m.mode?g[m.mode]:""),disabled:a||m.disabled,hoverLabel:{label:m.hoverLabel||(m.mode?g[m.mode]:"")},interactiveStyles:C,onPress:this._handleSecondaryClick,style:f.secondaryControl},o.a.createElement(h.a,{style:f.secondaryBorder},I)):null)}_renderIcon(e=!0,t){const{selected:s}=this.props,a=[f.icon,s&&f.iconSelected],r=[f.icon];switch(t){case d.a.Remove:return o.a.createElement(m.a,{style:[f.dismissIcon,e&&a]});case d.a.Expand:return o.a.createElement(u.a,{style:e?a:r});case d.a.Active:return o.a.createElement(y.a,{style:a});default:return null}}_renderAvatar(){const{avatar:e,compact:t}=this.props;return e?o.a.createElement(h.a,{style:[f.avatarContainer,t?f.avatarCompact:f.avatar]},e):null}}b.defaultProps={compact:!1,disabled:!1,selected:!1};const f=p.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:"1px",flexDirection:"row",minHeight:e.spaces.space40,overflow:"hidden"},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingHorizontal:e.spaces.space16},text:{width:"100%"},compact:{minHeight:e.spaces.space32},disabled:{borderColor:e.colors.gray50},selected:{backgroundColor:e.colors.primary,borderColor:e.colors.primary},avatar:{height:e.spaces.space32,width:e.spaces.space32},avatarCompact:{height:e.spaces.space24,width:e.spaces.space24},avatarContainer:{justifyContent:"center",marginRight:e.spaces.space8},withAvatarImage:{paddingLeft:`calc(${e.spaces.space2} * 2)`},withAvatarImageCompact:{paddingLeft:`calc(${e.spaces.space1} * 3)`},icon:{color:e.colors.primary,flexShrink:0,marginLeft:e.spaces.space12},iconSelected:{color:e.colors.whiteOnColor},withIcon:{paddingRight:e.spaces.space12},dismissIcon:{color:e.colors.gray300},secondaryControl:{flexShrink:0,justifyContent:"center"},secondaryBorder:{borderLeftColor:e.colors.borderColor,borderLeftWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space12}})));t.a=b},bJYH:function(e,t,s){"use strict";s.r(t),s.d(t,"GenericTypeaheadComposeWrapper",(function(){return _}));var a=s("ERkP"),o=s.n(a),r=s("oEoC"),n=s("oQhu"),i=s("7nmT"),l=s.n(i),c=s("WPfJ"),d=s("OEYw"),p=s("MWbm"),h=s("Irs7"),m=s("0FVZ"),u=s("xoZN"),y=s("7N4s"),g=s("rHpw"),b=s("GZwR");const f=[b.a.Users],w=[b.a.Topics];let I=0;class _ extends o.a.Component{constructor(e,t){super(e,t),this._typeaheadActive=!1,this._renderTypeaheadDropdown=e=>{const{contextText:t,isInlineReply:s,onSelectItem:a,source:r}=this.props,{isModal:n}=this.context,i=e.resultType===b.a.Topics?"hashtag":void 0,l=o.a.createElement(d.a,{ariaDescendantId:this.state.ariaDescendantId,contextText:t,domId:this._dropdownDomId,filter:this._getFilter(e.resultType),maxTopics:8,onItemClick:a,onItemFocusChanged:this._handleItemFocusChanged,query:e.word,ref:this._handleTypeaheadRef,source:r,style:this._calcStyle(),topicType:i,withItemAlwaysSelected:!0});return n||s?o.a.createElement(m.a.HalfSheet,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{onClick:this._handleDismiss,style:x.mask}),l)):o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{onClick:this._handleDismiss,style:x.mask}),l)},this.render=()=>{const{children:e,query:t}=this.props,s=o.a.cloneElement(e,{ariaAutocomplete:"list",ariaControls:this._dropdownDomId,ariaActiveDescendant:this.state.ariaDescendantId,ref:t=>{this._textInputNode=l.a.findDOMNode(t),this._textInputRef=t;const{ref:s}=e;s&&s(t)}});return o.a.createElement(p.a,{style:x.inputContainer},o.a.createElement(u.a,{onKeyDown:this._handleKeyDown},s,this._textInputNode&&t?this._renderTypeaheadDropdown(t):null))},this._getFilter=e=>"users"===e?f:w,this._calcStyle=()=>{const{isModal:e}=this.context,{isInline:t,isInlineReply:s}=this.props,a=this._textInputNode,o=window.innerHeight,r=window.innerWidth,n=this._textInputRef&&this._textInputRef.getTextInputHeight()||20;if(a instanceof window.HTMLElement){if(e||t){const t=a.getBoundingClientRect();return[this._getDropdownPositioningStyle(o,r,t.top,t.top+n,t.left,e,!!s),x.dropdownStyle]}return[this._getModalFullViewportStyle(n),x.modalFullViewportStyle]}return[this._getDropdownPositioningStyle(n,r,0,0,0,e,!!s),x.dropdownStyle]},this._handleKeyDown=e=>{const{selectedItem:t}=this.state,{onSelectItem:s,query:a}=this.props,{key:o}=e;r.g(e)&&a&&("ArrowDown"===o?(this._typeaheadRef&&this._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===o?(this._typeaheadRef&&this._typeaheadRef.focusPrevious(),e.preventDefault()):"Enter"===o||"Tab"===o?t&&(s(t),e.preventDefault()):"Escape"===o&&(this._handleDismiss(),e.preventDefault()))},this._handleItemFocusChanged=e=>this.setState({ariaDescendantId:r.b(),selectedItem:e}),this._handleTypeaheadRef=e=>{this._typeaheadRef=e},this._handleDismiss=()=>{this._textInputRef&&this._textInputRef.focus(),this.props.onDismiss()},this._getDropdownHeight=Object(n.a)(((e,t)=>{const s=50*e/100;return s>t?t:s})),this._getModalOrInlineReplyDropdownStyles=Object(n.a)(((e,t,s)=>e?{bottom:`${s}px`}:{top:`${t}px`})),this._getDropdownPositioningStyle=Object(n.a)(((e,t,s=0,a=0,o=0,r=!1,n=!1)=>{const i=t-o-10,l=e-a,c=s,d=l/e<.5&&c>l,p={maxWidth:`${i}px`,minWidth:`${Math.min(i,300)}px`,maxHeight:`${d?this._getDropdownHeight(e,c-10):this._getDropdownHeight(e,l-10)}px`};return r||n?{...p,position:"fixed",left:`${o}px`,...this._getModalOrInlineReplyDropdownStyles(d,a,e-s)}:d?{...p,bottom:"100%",position:"absolute"}:{...p,top:"100%",position:"absolute"}})),this._getModalFullViewportStyle=Object(n.a)((e=>({position:"absolute",top:`${e||0}px`,overflowX:"hidden",overflowY:"auto"}))),this.state={ariaDescendantId:r.b()},this._dropdownDomId=`typeaheadDropdownWrapped-${I}`,I+=1}componentDidUpdate(){const{onTypeaheadStateChange:e,query:t}=this.props,s=!(!this._textInputNode||!t);s!==this._typeaheadActive&&(this._typeaheadActive=s,e&&e(s))}resetSelectedItem(){this.setState({selectedItem:void 0})}}_.contextType=y.b,_.defaultProps={source:b.d.Compose};const x=g.a.create((e=>({dropdownStyle:{backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.small,boxShadow:e.boxShadows.medium,minHeight:100,overflowX:"hidden",overflowY:"auto"},mask:{...g.a.absoluteFillObject,position:"fixed"},modalFullViewportStyle:{backgroundColor:e.colors.cellBackground,right:0,left:0,borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,minHeight:100},inputContainer:{flexGrow:1,position:"relative",width:"100%",zIndex:c.g}})));t.default=Object(h.a)(_,{component:"compose"})}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.Typeahead.e6c8e325.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{"+Bsv":function(t,e,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("3XMw"),o=a.n(s),r=a("M2x3"),l="settingsAppBar",c=a("/yvb"),d=a("rHpw");const p=o.a.bb081ea1,u={viewType:"settings_button"},m=i.a.memo((({onPress:t,pullRight:e,to:a})=>i.a.createElement(c.a,{accessibilityLabel:p,behavioralEventContext:u,hoverLabel:{label:p},icon:i.a.createElement(r.a,null),link:a,onPress:t,pullRight:e,style:h.button,testID:l,type:"primaryText"}))),h=d.a.create((t=>({button:{marginVertical:`calc(-${t.spaces.space12})`}})));e.a=m},QuZr:function(t,e,a){"use strict";a.d(e,"a",(function(){return Y}));var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("ERkP")),o=a.n(s),r=a("8UdT"),l=a("oQhu"),c=a("z2Pn"),d=a("xZGM"),p=a("rxPX");const u=Object(l.a)(((t,e)=>e&&e.notificationsModule(t)));var m=a("FIs5"),h=a("ezF+"),b=a("QIgh"),y=a("AP4B");var f={loader:()=>Promise.all([a.e(0),a.e(3),a.e(5),a.e(6),a.e(227)]).then(a.bind(null,"RfPh")),loaderKey:"defaultNotificationLoader",strategy:a("XBtf").a.Critical};var g=h.e(f),_=a("rHpw"),T=a("VrCx"),w=a("xWpm");const E={[r.b.Notification]:g,[r.b.Tweet]:h.c({selectDisplayType:t=>t.content.displayType,handlers:{[T.a.Tweet]:Object(w.f)({allowDownvote:!0,createAdditionalProps:(t,{isUnread:e})=>({isUnread:e}),selectData:({entry:t,module:e})=>({isUnread:a=>e.selectIsUnread(a,t.entryId)}),withMuteConversation:!0}),[T.a.QuotedTweet]:Object(w.c)({createAdditionalProps:t=>({isCondensed:!0,style:M.quotedTweet})})}})};var v={...Object(b.a)({tweetDismissable:!0,withMuteConversation:!0}),...E,...y.a};const M=_.a.create((t=>({quotedTweet:{marginHorizontal:t.componentDimensions.gutterHorizontal,marginTop:0,marginBottom:t.componentDimensions.gutterVertical}})));var S=a("3XMw"),A=a.n(S),P=a("f42t"),x=a("zb92");var C=Object(x.a)({loader:()=>Promise.all([a.e(0),a.e(5),a.e(219)]).then(a.bind(null,"REvk"))}),I=a("EUHl"),k=a("5waQ"),O=a("VE3M"),L=a("yoO3"),V=a("fTQJ"),j=a("v6aA");const U={notifications_alt_a:[{height:200,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/rooster-head-400x200.v1.png",width:400},{height:400,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/rooster-head-800x400.v1.png",width:800},{height:600,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/rooster-head-1200x600.v1.png",width:1200}],notifications_alt_b:[{height:200,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/bell-400x200.v1.png",width:400},{height:400,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/bell-800x400.v1.png",width:800},{height:600,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/bell-1200x600.v1.png",width:1200}]},R={notifications_alt_a:{[k.a.All]:{headerMessage:A.a.b6a43e77,bodyMessage:A.a.f269c47d,buttonText:A.a.g6871092},[k.a.Mentions]:{headerMessage:A.a.e577e1a1,bodyMessage:A.a.b91e5a3a}},notifications_alt_b:{[k.a.All]:{headerMessage:A.a.g264f125,bodyMessage:A.a.a3420a9b,buttonText:A.a.g6871092},[k.a.Mentions]:{headerMessage:A.a.ef0b8028,bodyMessage:A.a.b91e5a3a}}},D=t=>["control","notifications_alt_a","notifications_alt_b"].includes(t),N=t=>U[t],B=(t,e,a)=>{var n,i;return null==(n=R[e])||null==(i=n[a])?void 0:i[t]},H=(t,e)=>B("bodyMessage",t,e),Q=A.a.eb75875d,F=A.a.e9f1fbcb,G=A.a.f287bb3a,z=A.a.h994ec4f,J=A.a.c06d4305,W=A.a.bfdb3c12,X=A.a.h1d919eb,Z=A.a.ib4510fd;class q extends o.a.Component{constructor(...t){super(...t),this._getNewItemsPillLabel=()=>{switch(this.props.notificationsType){case k.a.All:return Z;default:return}},this._getEmptyMessageBody=()=>{const t=this.context.featureSwitches.isTrue("responsive_web_reactions_enabled");switch(this.props.notificationsType){case k.a.Mentions:return D(this._emptyStateVariant)&&"control"!==this._emptyStateVariant?H(this._emptyStateVariant,this.props.notificationsType):J;case k.a.Verified:return t?X:W;default:return D(this._emptyStateVariant)&&"control"!==this._emptyStateVariant?H(this._emptyStateVariant,this.props.notificationsType):t?z:G}},this._getEmptyMessageHeader=()=>{return D(this._emptyStateVariant)&&"control"!==this._emptyStateVariant?(t=this._emptyStateVariant,e=this.props.notificationsType,B("headerMessage",t,e)):F;var t,e},this._renderEmptyTimeline=()=>{if(this._emptyStateVariant=this.context.featureSwitches.getStringValue("responsive_web_notifications_empty_state_redesign_variant"),D(this._emptyStateVariant)&&"control"!==this._emptyStateVariant){const a=(t=this._emptyStateVariant,e=this.props.notificationsType,B("buttonText",t,e));return o.a.createElement(m.a,i()({},a&&{buttonLink:"/i/connect_people",buttonText:a},{header:this._getEmptyMessageHeader(),imageVariants:N(this._emptyStateVariant),message:this._getEmptyMessageBody(),onButtonPress:this._handleEmptyTimelineButtonPress,onImpression:this._handleEmptyTimelineImpression}))}var t,e;return o.a.createElement(m.a,{header:this._getEmptyMessageHeader(),message:this._getEmptyMessageBody(),onImpression:this._handleEmptyTimelineImpression})},this._handleEmptyTimelineImpression=()=>{const{analytics:t}=this.props;t.scribe({component:"empty_message",action:"impression"})},this._handleEmptyTimelineButtonPress=()=>{const{analytics:t}=this.props;t.scribe({component:"empty_message",element:"primary_cta",action:"click"})},this._handleAtTop=()=>{this._updateLastReadIfNeeded()},this._renderTimelineHeader=()=>{const{addLeaveThisConversationEducationFlag:t,notificationsType:e,shouldShowUnmentionEducation:a,timelineHasTweets:n}=this.props;return a&&e===k.a.Mentions&&n&&this.context.featureSwitches.isTrue("dont_mention_me_mentions_tab_education_enabled")?o.a.createElement(C,{onDismiss:t}):void 0}}componentDidMount(){const{notificationsType:t,setNotificationsType:e}=this.props;e(t)}componentWillUnmount(){const{markAllAsRead:t,notificationsType:e}=this.props;this._updateLastReadIfNeeded(),e===k.a.All&&t()}render(){const{notificationsModule:t}=this.props;return t?o.a.createElement(L.a,null,o.a.createElement(V.a,{entryConfiguration:v,header:this._renderTimelineHeader(),key:"notification-timeline",module:t,newTweetsPillLabel:this._getNewItemsPillLabel(),newTweetsPillMode:I.a.CLIENT,onAtTop:this._handleAtTop,renderEmptyState:this._renderEmptyTimeline,title:Q})):null}_updateLastReadIfNeeded(){const{notificationsType:t,unreadCount:e,updateLastRead:a}=this.props;e&&a(t)}}q.contextType=j.a;const K=t=>Object(P.a)((t=>Object(p.a)().propsFromState((()=>({shouldShowUnmentionEducation:t=>Object(d.D)(t,d.o),unreadCount:(e,{ntabData:a})=>{var n;return null==(n=u(t,a))?void 0:n.selectUnreadEntriesCount(e)},timelineHasTweets:(e,{ntabData:a})=>{const n=u(t,a),i=null==n?void 0:n.selectEntries(e);return!!(null==i?void 0:i.some((t=>t.type===r.b.Tweet)))}}))).adjustStateProps((({shouldShowUnmentionEducation:e,timelineHasTweets:a,unreadCount:n},{ntabData:i})=>({ntabData:null,notificationsModule:u(t,i),notificationsType:t,shouldShowUnmentionEducation:e,timelineHasTweets:a,unreadCount:n}))).propsFromActions((({ntabData:e})=>{var a;return{addLeaveThisConversationEducationFlag:()=>Object(d.z)(d.o),markAllAsRead:null==(a=u(t,e))?void 0:a.markAllAsRead,updateLastRead:e&&e.updateLastSeenCursor,setNotificationsType:c.j}})).withAnalytics({page:"ntab",section:t}))(t)(q),{ntabData:O.a}),Y=({notificationsType:t})=>K(t)},WR6I:function(t,e,a){"use strict";a.r(e),a.d(e,"NotificationsScreen",(function(){return D}));a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("v6aA"),o=a("es0u"),r=a("G6rE"),l=a("rxPX");var c=Object(l.a)().propsFromState((()=>({loggedInUser:r.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:t})=>({isLoggedInUserVerified:!!t&&t.verified}))).withAnalytics({page:"ntab"}),d=a("pnqf"),p=a("dwig"),u=a("0+qk"),m=a("3XMw"),h=a.n(m),b=a("yoO3"),y=a("5FtR"),f=a("wytG"),g=a("+Bsv"),_=a("VS6U"),T=a("mw9i"),w=a("k/OQ"),E=a("zCf4");const v=h.a.eb75875d,M=h.a.f8321d82,S=h.a.cdb53d79,A=h.a.h3290871,P=h.a.a98ba778,x="/notifications",C="/notifications/mentions",I="/notifications/verified",k=i.a.createElement(g.a,{pullRight:!0,to:"/settings/notifications"}),O=h.a.eb75875d,L=Object(d.a)(Object(f.a)((()=>Promise.resolve().then(a.bind(null,"hCg+"))))),V=Object(d.a)(Object(f.a)((()=>Promise.resolve().then(a.bind(null,"lGAB"))))),j=Object(d.a)(Object(f.a)((()=>Promise.resolve().then(a.bind(null,"srGC"))))),U=[{to:x,key:M,label:M,retainScrollPosition:!1},{to:C,key:S,label:S,retainScrollPosition:!1}],R=[...U,{to:I,key:A,label:A,retainScrollPosition:!1}],D=t=>{const{featureSwitches:e}=i.a.useContext(s.a),a=e.isTrue("responsive_web_ntab_verified_mentions_vit_internal_dogfood"),{history:n,isLoggedInUserVerified:r,location:l}=t,c=r||a,d=i.a.createElement(E.d,null,i.a.createElement(E.b,{component:L,exact:!0,path:x}),i.a.createElement(E.b,{component:V,exact:!0,path:C}),i.a.createElement(E.b,{component:j,exact:!0,path:I}));return l.pathname!==I||c?i.a.createElement(b.a,null,i.a.createElement(_.a,{documentTitle:v,history:n,primaryContent:(()=>{const t=i.a.createElement(u.a,{history:n});return i.a.createElement(p.a,{component:T.a,fab:t},d)})(),rightControl:k,secondaryBar:(()=>{const t=c?R:U;return i.a.createElement(w.a,{accessibilityLabel:P,links:t})})(),sidebarContent:i.a.createElement(o.a,null),title:O})):i.a.createElement(y.a,{to:x})};e.default=c(D)},f42t:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("ERkP")),o=a.n(s);class r extends o.a.Component{constructor(...t){super(...t),this.state={isLoaded:!1}}componentDidMount(){return this._isMounted=!0,this.load()}componentDidUpdate(t){return this.props.modules===t.modules?null:this.load()}componentWillUnmount(){this._isMounted=!1}load(){this.setState({isLoaded:!1});const{modules:t}=this.props,e=Object.keys(t);return Promise.all(e.map((e=>t[e]()))).then((t=>e.reduce(((e,a,n)=>(e[a]=t[n],e)),{}))).then((t=>{if(!this._isMounted)return null;this.setState({modules:t,isLoaded:!0})}))}render(){const{isLoaded:t}=this.state,e=t?this.state.modules:{};return o.a.Children.only(this.props.children(e||{}))}}const l=(t,e)=>a=>o.a.createElement(r,{modules:e},(e=>o.a.createElement(t,i()({},e,a))))},"hCg+":function(t,e,a){"use strict";a.r(e);var n=a("5waQ"),i=a("QuZr");e.default=Object(i.a)({notificationsType:n.a.All})},lGAB:function(t,e,a){"use strict";a.r(e);var n=a("5waQ"),i=a("QuZr");e.default=Object(i.a)({notificationsType:n.a.Mentions})},qJ6t:function(t,e,a){"use strict";a.r(e),a.d(e,"notificationsModule",(function(){return d})),a.d(e,"updateLastSeenCursor",(function(){return p}));var n=a("vWJI"),i=a("k49u"),s=a("0KEI"),o=a("UtAB"),r=a("fs1G"),l=a("5waQ"),c=a("ZNT5");const d=(t=l.a.All)=>Object(c.a)({timelineId:`notifications-${t}`,getEndpoint:t=>t.URT.fetchNotifications,getEndpointParams:e=>{const{polling:a,...n}=e;return{type:t,...n}},context:"FETCH_NOTIFICATIONS_TIMELINE",perfKey:"notifications",postFetchAction:o.a,staleIntervalMs:5e3}),p=(t=l.a.All)=>(e,a,{api:o})=>{const l=d(t),c=l&&n.getTopCursor(l.selectEntries(a()));if(c){const a={cursor:n.getValue(c),type:t},l=e(Object(s.createLocalApiErrorHandlerWithContextFactory)("APP_UPDATE_NOTIFICATION_LAST_READ")({[i.a.AppInReadOnlyMode]:{customAction:r.a}}));o.URT.updateNotificationsLastSeenCursor(a).catch(l)}};e.default=d(l.a.All)},srGC:function(t,e,a){"use strict";a.r(e);var n=a("5waQ"),i=a("QuZr");e.default=Object(i.a)({notificationsType:n.a.Verified})}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Notifications.db043465.js.map
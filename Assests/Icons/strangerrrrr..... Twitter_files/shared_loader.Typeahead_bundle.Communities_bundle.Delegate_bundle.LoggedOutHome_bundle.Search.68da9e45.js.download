(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3EFP":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return c}));const s="ArrowDown",n="ArrowUp",r="Enter",i="Escape",o="ESC",c="Tab"},"4e/K":function(e,t,a){"use strict";a.r(t),a.d(t,"TypeaheadInput",(function(){return R})),a.d(t,"styles",(function(){return k}));var s=a("3EFP"),n=a("ERkP"),r=a.n(n),i=a("ZUOq"),o=a("+Kfv"),c=a("woHV"),l=a("3XMw"),d=a.n(l),u=a("VwDm"),h=a("WPfJ"),p=a("N5qz"),m=a("Es6L"),y=a("OEYw"),f=a("GZwR"),b=a("MWbm"),_=a("v6aA"),g=a("rHpw"),w=a("xoZN"),v=a("6OUF"),I=a("pf9B"),C=a("cHvH"),x=a("oEoC");const E=d.a.f065ba8c,S={viewType:"typeahead_input"},T=e=>p.a.isTwoColumnNormalLayout(e)?{width:i.a.columnWidths.secondary.normal+g.a.theme.spacesPx.space24,left:-g.a.theme.spacesPx.space24/2}:p.a.isTwoColumnSmallLayout(e)?{width:i.a.columnWidths.secondary.small+g.a.theme.spacesPx.space16,left:-g.a.theme.spacesPx.space16/2}:void 0;let D=1;class R extends r.a.Component{constructor(e,t){super(e,t),this._withNewTypeaheadUI=!1,this._render=({windowWidth:e})=>{const{alwaysOpen:t,disableClearButton:a,forceVdlDisable:s,inputStyle:n,isCompact:i,isOnHomepage:l,placeholder:d,renderInSearchField:h,rounded:p,shouldAutoFocus:m,shouldFocusOnClear:y,style:f,testID:_}=this.props,g=this.state.showTypeaheadDropdown||t;return r.a.createElement(o.a,{behavioralEventContext:S},r.a.createElement(b.a,{onLayout:this._handleLayout,ref:this._setRootContainerNode,style:[k.root,f]},r.a.createElement(w.a,{onKeyDown:this._handleKeyDown,style:k.keydownInputListener},r.a.createElement(c.a,{accessibilityLabel:d,accessibilityRole:"search",onSubmit:this._handleFormSubmit,style:k.wrapper},r.a.createElement(b.a,{ref:this._setInputContainerNode,style:n},r.a.createElement(v.a,{Icon:u.a,ariaActiveDescendant:this.state.ariaDescendantId,ariaAutocomplete:"list",ariaExpanded:g,ariaLabel:E,ariaOwns:this._dropdownDomId,ariaRole:"combobox",autoComplete:"off",autoCorrect:!1,autoFocus:m,contentBelow:h&&h(),focusOnClear:y,isCompact:i,leftAligned:l,onChange:this._handleInputChange,onClear:this._handleInputClear,onFocus:this._handleInputFocus,onLayout:this._handleInputLayoutChanged,placeholder:d,ref:this._setInputRef,returnKeyType:"search",spellCheck:"false",styleType:s?"legacyPill":p?"pill":"selection",testID:_,value:this.state.query,withClearButton:!a&&this.state.showTypeaheadDropdown})),r.a.createElement(b.a,{style:[k.typeaheadContainer,!p&&k.topBorder]},g?this._renderDropdown(e):null)))))},this._renderDropdown=e=>{const{communityId:t,filter:a,getItemDisabledMessage:s,getItemIsDisabled:n,getTopicExactMatch:i,getUserDisplayNameLabel:o,getUserExactMatch:c,injectedItems:l,isInSidebar:d,isModal:u,isOnHomepage:h,maxEvents:p,maxTopics:f,onItemsChanged:b,orderResults:_,renderCallout:w,renderEmptyState:v,renderHeader:I,renderNoResultsState:C,renderUserDecoration:E,selectedItems:S,shouldDeferPrefetch:D,source:R,trustedFriendsId:O,withFixedPositioning:L,withSectionDivider:P}=this.props,U=e>=g.a.theme.breakpoints.medium||Object(m.a)(),{dropdownOffset:N,query:F}=this.state,j=u?k.modalDropdown:[k.dropdown,!U&&L&&N?[Object(x.d)(N),{height:`calc(100vh - ${N}px)`}]:null,(U||h)&&k.wideModeDropdown,this._withNewTypeaheadUI&&d&&T(e),h&&k.shortModeDropdown,!U&&h&&k.shortModeDropdownMobile],M={ariaDescendantId:this.state.ariaDescendantId,domId:this._dropdownDomId,onDismiss:this._handleOnEmptyStateDismiss,onItemFocusChanged:this._handleItemFocusChanged,ref:this._handleDropdownRef,style:j};return v&&!F?v(M):r.a.createElement(y.a,{ariaDescendantId:this.state.ariaDescendantId,communityId:t,domId:this._dropdownDomId,filter:a,getItemDisabledMessage:s,getItemIsDisabled:n,getTopicExactMatch:i,getUserDisplayNameLabel:o,getUserExactMatch:c,injectedItems:l,maxEvents:p,maxTopics:f,onItemClick:this._handleItemClick,onItemFocusChanged:this._handleItemFocusChanged,onItemsChanged:b,orderResults:_,query:F,ref:this._handleDropdownRef,renderCallout:w,renderHeader:I,renderNoResultsState:C,renderUserDecoration:E,selectedItems:S,shouldDeferPrefetch:D,source:R,style:j,trustedFriendsId:O,withSectionDivider:P})},this._dismissDropdown=()=>{this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss()},this._handleOnEmptyStateDismiss=()=>{this._dismissDropdown(),this._inputRef&&this._inputRef.blur()},this._handleLayout=()=>{this._updatePosition()},this._handleInputLayoutChanged=()=>{this._updatePosition()},this._updatePosition=()=>{if(!this._inputContainerNode)return;const{bottom:e}=this._inputContainerNode.getBoundingClientRect();e!==this.state.dropdownOffset&&this.setState({dropdownOffset:e})},this._handleDropdownRef=e=>{this._dropdownRef=e},this._setRootContainerNode=e=>{this._rootContainerNode=e||null},this._setInputRef=e=>{this._inputRef=e},this._setInputContainerNode=e=>{this._inputContainerNode=e||null,this._inputContainerNode&&this._updatePosition()},this._handleFocusChange=e=>{const t=I.a.getCount()>0;this._rootContainerNode&&this._rootContainerNode.contains(e.target)||t||this.state.showTypeaheadDropdown&&this._dismissDropdown()},this._handleKeyDown=e=>{const{key:t}=e,{showTypeaheadDropdown:a}=this.state;if(Object(x.g)(e)){if(t===s.a)return this._focusNext(),void e.preventDefault();if(t===s.b)return this._focusPrevious(),void e.preventDefault();if(t===s.d)return this._dismissDropdown(),void e.preventDefault();if(t!==s.f)return t===s.c&&this._hasFocusedItem()?(this._selectFocusedItem(),void e.preventDefault()):void(a||this.setState({showTypeaheadDropdown:!0}));this._dismissDropdown()}},this._handleItemFocusChanged=()=>{this.setState({ariaDescendantId:Object(x.b)()})},this._handleInputClear=()=>{this.setQuery("")},this._handleInputFocus=()=>{this.setState({showTypeaheadDropdown:!0}),this._updatePosition(),this.props.onFocus&&this.props.onFocus()},this._handleInputChange=e=>{this.setQuery(e.target.value),this._updatePosition()},this._handleFormSubmit=e=>{e.preventDefault(),e.stopPropagation(),this._inputRef&&this._inputRef.blur(),this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss(),this.props.onSubmit&&this.props.onSubmit()},this._handleItemClick=(e,t)=>{const{onDismiss:a,onItemClick:s,shouldClearOnSelect:n,shouldFocusOnClear:r}=this.props,i=n?"":this.state.query;this.setState({showTypeaheadDropdown:!1}),this._inputRef&&(n&&r?this._inputRef.focus():this._inputRef.blur()),this.setQuery(i),a&&a(),s&&s(e,t)},this._hasFocusedItem=()=>this._dropdownRef&&this._dropdownRef.hasFocusedItem(),this._selectFocusedItem=()=>{this._dropdownRef&&this._dropdownRef.selectFocusedItem()},this._focusNext=()=>{this._dropdownRef&&this._dropdownRef.focusNext()},this._focusPrevious=()=>{this._dropdownRef&&this._dropdownRef.focusPrevious()},this.state={ariaDescendantId:Object(x.b)(),query:e.initialValue,showTypeaheadDropdown:!1},this._dropdownDomId=`typeaheadDropdown-${D}`,D+=1,this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}UNSAFE_componentWillReceiveProps(e){this.props.initialValue!==e.initialValue&&this.setQuery(e.initialValue)}componentDidMount(){window.document.addEventListener("click",this._handleFocusChange,!0)}componentWillUnmount(){window.document.removeEventListener("click",this._handleFocusChange,!0)}render(){return r.a.createElement(C.a,null,this._render)}focus(){this._inputRef&&this._inputRef.focus()}setQuery(e){this.setState({query:e}),this.props.onQueryChange&&this.props.onQueryChange(e)}}R.defaultProps={disableClearButton:!1,filter:[f.a.Users,f.a.Topics],isInSidebar:!1,initialValue:"",withSectionDivider:!0},R.contextType=_.a;const k=g.a.create((e=>({root:{flex:1,flexDirection:"column",position:"relative",zIndex:h.d+1},typeaheadContainer:{flex:1,position:"relative"},keydownInputListener:{flexShrink:1},dropdown:{backgroundColor:e.colors.cellBackground,left:0,right:0,overflowY:"auto",overscrollBehavior:"contain",position:"absolute",top:0,WebkitOverflowScrolling:"touch"},modalDropdown:{backgroundColor:e.colors.cellBackground,flex:1,minHeight:300,position:"relative",overflowY:"auto",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch"},wideModeDropdown:{borderRadius:e.borderRadii.medium,boxShadow:e.boxShadows.medium,minHeight:100,maxHeight:`calc(80vh - ${e.componentDimensions.appBarHeight})`},shortModeDropdown:{minHeight:100,maxHeight:"35vh",paddingBottom:"0"},shortModeDropdownMobile:{position:"absolute",height:"40vh",top:0},wrapper:{alignItems:"stretch",flex:1},topBorder:{borderTopColor:e.colors.gray200,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small}})));t.default=R},"5T6p":function(e,t,a){"use strict";var s=a("ERkP"),n=a.n(s),r=a("MWbm"),i=a("TIdA"),o=a("A91F"),c=a("t62R");const l=a("rHpw").a.create((e=>({root:{flexDirection:"row",flexShrink:1,flexGrow:1},bodyColumn:{justifyContent:"center",flexDirection:"column",marginRight:e.spaces.space4,marginLeft:e.spaces.space12,flexShrink:1},coverContainer:{borderRadius:e.borderRadii.large,overflow:"hidden"},cellThumbnail:{height:e.spaces.space48,width:e.spaces.space48},largeCellThumbnail:{height:e.spaces.space56,width:e.spaces.space56}})));t.a=function(e){const{image:t,style:a,supportText:s,title:d,withNewTypeaheadUI:u}=e;return n.a.createElement(r.a,{style:[l.root,a]},n.a.createElement(r.a,{style:[l.coverContainer,u?l.largeCellThumbnail:l.cellThumbnail]},t?n.a.createElement(i.a,{accessibilityLabel:"",aspectMode:o.a.SQUARE,image:t}):null),n.a.createElement(r.a,{style:l.bodyColumn},s?n.a.createElement(c.b,{color:"gray700",numberOfLines:1,size:"subtext2"},s):null,n.a.createElement(c.b,{numberOfLines:2,weight:"bold"},d)))}},AQOc:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return d}));a("kYxP");var s=a("lnti"),n=a("aWyx"),r=a("Yatk");const i={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}},o=(e=[],t={})=>e.map((e=>({...e,user:Object(r.a)(t[e.user_id])||{created_at:"",description:"",entities:{},followed_by:!1,followers_count:0,following:!1,friends_count:0,id:parseInt(e.user_id,10),id_str:e.user_id,name:"",profile_image_url_https:"",protected:!1,screen_name:"",verified:!1}})));function c(e,t){const{entries:a,entryIdsByConversationId:s}=t;return(s[e]||[]).map((e=>a[e]&&a[e].data)).filter(Boolean)}const l=(e,t=i,a)=>{const{conversation_id:s,participants:n,...r}=e;return{conversation_id:s,...r,entries:t.entryIdsByConversationId[s]||[],participants:o(n,a)}},d=(e,t,a)=>{const{conversation_id:i,participants:l,social_proof:d,...u}=e,h={conversation_id:i,...u,entries:c(i,t),participants:o(l,a),social_proof:void 0};return d&&(h.social_proof=((e=[],t={})=>e.map((e=>{if(e.proof_type===n.d.MUTUAL_FRIENDS){const{users:a,...n}=e;return{...n,users:Object(s.a)(a.map((e=>Object(r.a)(t[e]))))}}return e})))(d,a)),h}},Gfoi:function(e,t,a){"use strict";var s=a("ERkP"),n=a.n(s),r=a("Lsrn"),i=a("k/Ka");const o=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style],viewBox:"0 0 20.5 20.5"},n.a.createElement("g",null,n.a.createElement("path",{d:"M20.03 18.72l-3.66-3.66c1.325-1.57 2.13-3.596 2.13-5.81 0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM2 9.25c0-4.135 3.365-7.5 7.5-7.5S17 5.115 17 9.25s-3.365 7.5-7.5 7.5S2 13.385 2 9.25z"})));o.metadata={width:20.5,height:20.5},t.a=o},"IMA+":function(e,t,a){"use strict";var s=a("97Jx"),n=a.n(s),r=(a("kYxP"),a("SV7d")),i=a("ERkP"),o=a.n(i),c=a("TIdA"),l=a("t62R"),d=a("5mJL"),u=a("DNho"),h=a("nBUg"),p=a("qjak"),m=a("ir4X"),y=a("htQn"),f=a("e5HP"),b=a("FBXD"),_=a("Nqmc"),g=a("rHpw"),w=a("jhWN"),v=a("1I0O"),I=a("pBrB"),C=a("jV+4"),x=a("MWbm");const E=Object.freeze({TWEET:"tweets",USER:"users"}),S=Object.freeze({UserCompact:"UserCompact",UserConcise:"UserConcise",UserDetailed:"UserDetailed",ExperimentalUserTypeahead:"ExperimentalUserTypeahead"}),T=c.a.createLayoutCache(),D={viewType:"user_cell"};class R extends o.a.PureComponent{constructor(...e){super(...e),this._renderUserName=()=>{const{badgeContext:e,disabledMessage:t,displayNameLabel:a,isBlocking:s,isDisabled:n,isFollowedBy:r,isProtected:i,isVerified:c,name:d,onScreenNameClick:u,promotedContent:h,promotedItemType:p,screenName:m,screenNameSuffix:y,translatorType:f,withFollowsYou:b,withLink:_}=this.props,g=o.a.createElement(C.a,{badgeContext:e,displayNameLabel:a,isProtected:i,isVerified:c,name:d,onLinkClick:u,promotedContent:p===E.TWEET?h:void 0,screenName:m,screenNameSuffix:y,translatorType:f,withFollowsYou:b&&r,withHoverCard:!s&&!n&&_,withLink:!n&&_,withScreenName:!t,withStackedLayout:!0});return t?o.a.createElement(x.a,{style:k.disabledMessageContainer},g,o.a.createElement(l.b,{color:"gray700"},t)):g},this._renderSocialContext=()=>{const{avatarSize:e,displayMode:t,socialContext:a}=this.props;return a?o.a.createElement(h.b.UseProps,null,(s=>o.a.createElement(_.a,{avatarSize:e,contextType:a.contextType,iconSize:"large",link:a.link,style:k.socialContext,text:a.text,weight:"bold",withLeftPadding:!s.socialContextRefreshEnabled()&&t!==S.ExperimentalUserTypeahead}))):null},this._renderUserTypeaheadSocialContext=()=>{const{socialContext:e}=this.props,{Icon:t,text:a}=e&&Object(p.a)({link:e.link,text:e.text,iconSize:"small",contextType:e.contextType})||{};return e?o.a.createElement(x.a,{style:k.userTypeaheadSocialContext},o.a.createElement(x.a,{style:k.userTypeaheadSocialContextIcon},t),o.a.createElement(l.b,{color:"gray700",numberOfLines:1,style:k.userTypeaheadSocialContextText},a)):null},this._renderHighlightedUserLabel=()=>{const{highlightedLabel:e}=this.props;return e?o.a.createElement(m.a,{label:e}):null},this._isEligibleForBio=()=>{const{displayMode:e}=this.props;return-1!==[S.UserDetailed,S.UserConcise].indexOf(e)},this._handleKeyPress=e=>{e.defaultPrevented||"Enter"!==e.key||this._handleClick(e)},this._handleClick=Object(b.a)((e=>{const{onCellClick:t}=this.props;e.preventDefault(),t&&t()}))}render(){const{accessibilityLabel:e,accessibilityState:t,avatarDecoration:a,avatarSize:s,avatarUri:i,bottomControl:c,decoration:l,displayMode:h,isBlocking:p,isDisabled:m,onAvatarClick:b,onCellClick:_,onScreenNameClick:g,presenceIndicator:I,promotedContent:C,promotedItemType:R,screenName:O,style:L,testID:P,userId:U,withDarkerInteractiveBackground:N,withInteractiveStyling:F,withLink:j,withUsernameCenterAligned:M}=this.props,A=j&&!p,H=h===S.UserCompact||M,z=h===S.ExperimentalUserTypeahead,B=C&&R===E.USER&&"earned"!==(C.disclosure_type&&C.disclosure_type.toLowerCase())?o.a.createElement(f.a,{contentAuthorId:U,promotedContent:C,style:k.promotedIndicator}):null,q={accessibilityHidden:!0,decoration:a,focusable:!1,imageLayoutCache:T,onClick:b,onHoverCardScreenNameClick:g,promotedContent:C,screenName:O,style:k.avatar,uri:i,withHoverCard:A,withLink:j},V=o.a.createElement(u.a.Consumer,null,(({avatarSize:e})=>I?o.a.createElement(v.a,n()({},q,I,{size:e})):o.a.createElement(w.a,n()({size:e},q)))),W=t&&"boolean"==typeof t.checked,G=void 0!==_,Y=(W?"radio":G&&"button")||"listitem",Q=this._renderUserName(),$=this._renderHighlightedUserLabel(),X=this._renderBio(),K=$||X||B||c,Z=o.a.createElement(o.a.Fragment,null,$,X,B,c?o.a.createElement(x.a,{style:k.bottomControl},c):null);return o.a.createElement(r.a,{behavioralEventContext:D},o.a.createElement(y.a,{accessibilityLabel:e,accessibilityRole:Y,accessibilityState:t,disabled:!!m,focusable:W||G,onClick:this._handleClick,onKeyPress:this._handleKeyPress,pointerEvents:m?"none":void 0,style:[k.root,L],testID:P,withDarkerInteractiveBackground:N,withInteractiveStyling:null!=F?F:!!_},z?null:this._renderSocialContext(),o.a.createElement(d.a,{avatarCell:V,avatarCellStyle:[k.avatarColumn,H&&k.bodyColumnCentered],avatarSize:z?"xxxLarge":s,cellStyle:[k.bodyColumn,H&&k.bodyColumnCentered]},o.a.createElement(x.a,{style:k.body},Q,l),H?null:Z,z?this._renderUserTypeaheadSocialContext():null),K&&H?o.a.createElement(d.a,{avatarCell:null,avatarCellStyle:k.avatarColumn,cellStyle:k.bodyColumn},Z):null))}_renderBio(){const{description:e,displayMode:t,entities:a,userId:s,withheldDescription:n,withheldEntities:r}=this.props;return a&&e&&this._isEligibleForBio()?o.a.createElement(I.a,{description:e,entities:a,isConcise:t===S.UserConcise,style:k.bio,userId:s,withheldDescription:n,withheldEntities:r}):null}}R.defaultProps={testID:"UserCell",withLink:!0};const k=g.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},avatarColumn:{justifyContent:"flex-start"},bodyColumn:{flexGrow:1},bodyColumnCentered:{justifyContent:"center"},avatar:{display:"block",width:"100%"},bio:{paddingTop:e.spaces.space4,whiteSpace:"normal"},socialContext:{marginBottom:e.spaces.space4},userTypeaheadSocialContext:{alignItems:"center",flexDirection:"row",textColor:e.colors.gray700},userTypeaheadSocialContextIcon:{flexShrink:0},userTypeaheadSocialContextText:{paddingLeft:e.spaces.space2},body:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},promotedIndicator:{margin:0,paddingTop:e.spaces.space4,paddingBottom:0,paddingHorizontal:0},bottomControl:{paddingTop:e.spaces.space4},disabledMessageContainer:{flexShrink:1}})));t.a=R},OEYw:function(e,t,a){"use strict";var s=a("97Jx"),n=a.n(s),r=a("ERkP"),i=a.n(r),o=(a("kYxP"),a("hqKg")),c=a("oEoC"),l=a("o52z"),d=a("kGix"),u=a("M0jS"),h=a("Qyxo"),p=a("lnti"),m=a("rxPX"),y=a("0KEI"),f=(a("MvUL"),a("/kEJ")),b=a("oEOe"),_=a("vy4g"),g=a("3A2y"),w=a("Y6L+"),v=a("9EWH"),I=a("Ssj5"),C=a("GZwR");const x="typeaheadV2",E=[],S=Object.freeze({REQUEST:"rweb/typeaheadV2/FETCH_REQUEST",SUCCESS:"rweb/typeaheadV2/FETCH_SUCCESS",FAILURE:"rweb/typeaheadV2/FETCH_FAILURE"}),T=({q:e,result_type:t,src:a},s)=>{let n=t;return null!=s&&s.communityId?n=`${t}_${s.communityId}`:null!=s&&s.trustedFriendsId&&(n=`${t}_${s.trustedFriendsId}`),`${e}_${n}_${a}`},D={remoteResults:{},cachedIds:[]};const R=e=>e.map((({rounded_score:e,tokens:t,...a})=>{const{topic:s}=a,n=C.b.Topic;return{id:`${n}_${s.replace(" ","_")}`,type:n,tokens:t,rounded_score:e,data:a}})),k=e=>e.map((({rounded_score:e,tokens:t,...a})=>{var s;const n=C.b.Event,r=null==a||null==(s=a.url)?void 0:s.match(w.A.id);return{id:(null==r?void 0:r[0])||"",type:n,tokens:t,rounded_score:e,data:a}})),O=(e,t)=>e.typeaheadV2.remoteResults[t],L=(e,t)=>(a,s)=>{const n=O(s(),T(e,t)),r=n&&n.timestamp;return r&&Date.now()-r<=3e5?Promise.resolve():a(P(e,t))},P=(e,t)=>(a,s,{api:n})=>{if(!e||!e.q||""===e.q.trim())return Promise.resolve();const r={queryId:T(e,t)},{communityId:i,trustedFriendsId:o}=t||{},c=e.result_type.split(","),l={actionTypes:S,context:"FETCH_TYPEAHEAD",meta:r};if(c.includes(C.a.CommunityUsers)&&i){const t=e=>{const{entities:t}=(null==e?void 0:e.invite_action_results)||{};return t?[Object(f.c)(t)]:void 0};return Object(b.b)(a,{params:{communityId:i,prefix:e.q},request:n.Typeahead.fetchCommunityInviteUsers})(l,t)}if(c.includes(C.a.CommunityMembers)&&i){const t=e=>{const{entities:t}=(null==e?void 0:e.user_community_relationships)||{};return t?[Object(f.c)(t)]:void 0};return Object(b.b)(a,{params:{communityId:i,prefix:e.q},request:n.Typeahead.fetchCommunityMembers})(l,t)}return c.includes(C.a.TrustedFriendsSuggested)&&o?Object(b.b)(a,{params:{trustedFriendsId:o,prefix:e.q},request:n.Typeahead.fetchTrustedFriendsSuggestions})(l):Object(b.b)(a,{params:e,request:n.Typeahead.fetch})(l)};I.a.register({[x]:function(e=D,t){switch(t.type){case S.REQUEST:{const{meta:{queryId:a}}=t;return Object(v.a)(e,(e=>{e.remoteResults[a]||(e.remoteResults[a]={fetchStatus:d.a.NONE}),e.remoteResults[a].fetchStatus=d.a.LOADING}))}case S.SUCCESS:{const{meta:{queryId:a},payload:s}=t;if(!s)return e;const n=s.users.map((e=>Object(_.a)(e,C.c.Remote))),r={fetchStatus:d.a.LOADED,id:a,orderedSections:s.ordered_sections,events:k(s.events),topics:R(s.topics),users:Object(C.i)(n),timestamp:Date.now()};return Object(v.a)(e,(e=>{e.cachedIds=e.cachedIds.filter((e=>e!==a)),e.cachedIds.push(a),e.cachedIds.length>=25&&(e.remoteResults=Object(g.a)(e.remoteResults,e.cachedIds.splice(0,1))),e.remoteResults[a]=r}))}case S.FAILURE:{const{meta:{queryId:a}}=t;return Object(v.a)(e,(e=>{e.remoteResults[a].fetchStatus=d.a.FAILED}))}default:return e}}});var U=a("UQTn");const N=[C.a.Users],F=e=>{const{communityId:t,filter:a,query:s,source:n,trustedFriendsId:r}=e;return T({q:s,result_type:(a||N).join(","),src:n},{communityId:t,trustedFriendsId:r})},j=(e,t)=>((e,t)=>{const a=O(e,t);return a&&a.fetchStatus})(e,F(t)),M=(e,t)=>((e,t)=>{const a=O(e,t);return a&&a.users||E})(e,F(t)),A=(e,t)=>((e,t)=>{const a=O(e,t);return a&&a.topics||E})(e,F(t)),H=(e,t)=>((e,t)=>{const a=O(e,t);return a&&a.events||E})(e,F(t)),z=(e,t)=>(t.rounded_graph_weight||0)-(e.rounded_graph_weight||0),B=()=>Object(o.createSelector)(M,Object(o.createSelector)(((e,t)=>t.query),((e,t)=>t.filter),U.d,U.e,((e,t,a,s)=>{if(!e||!t||t.indexOf(C.a.Users)<0)return Object(l.a)();const n=Object(U.f)(a,e);return Object(C.i)(n.map((e=>s[e])).sort(z).slice(0,10))})),j,((e,t)=>t.injectedItems),((e,t)=>t.query),((e,t)=>t.getUserExactMatch),((e,t)=>t.userLimit),((e,t,a,s,n,r,i)=>{const o=Object(h.a)(s||[],(e=>e.type===C.b.User?e.data.id_str:void 0)),u=t.filter((e=>o.indexOf(e.id)<0)),p=e.filter((e=>o.indexOf(e.id)<0)),m=Object(c.a)(u,p).slice(0,i||10),y=a===d.a.LOADED,f=r&&r({query:n,hasResults:!!e.length,isLoaded:y}),b=f?[...m,f]:m;return{users:b.length?b:Object(l.a)(),userExactMatch:f,filteredPrefetchUsers:u,filteredRemoteUsers:p}})),q=()=>Object(o.createSelector)(B(),Object(o.createSelector)(A,j,((e,t)=>t.query),((e,t)=>t.maxTopics),((e,t)=>t.getTopicExactMatch),((e,t,a,s,n)=>{const r=t===d.a.LOADED,i=n&&n({query:a,hasResults:!!e.length,isLoaded:r}),o=e.slice(0,s||3);return i&&o.push(i),o.length?o:Object(l.a)()})),Object(o.createSelector)(H,j,((e,t)=>t.query),((e,t)=>t.maxEvents),((e,t)=>t.filter),((e,t,a,s,n)=>{const r=a&&n&&n.indexOf(C.a.Events)>=0,i=e.slice(0,s||1);return i.length&&r?i:Object(l.a)()})),((e,t)=>t.injectedItems),((e,t)=>t.orderResults),((e,t,a,s,n)=>{const{users:r}=e,i=s&&s.length?s:null,o=n?n(i,r,t,a,null==e?void 0:e.filteredRemoteUsers,null==e?void 0:e.filteredPrefetchUsers,null==e?void 0:e.userExactMatch):Object(p.a)([i,a.length?a:void 0,t.length?t:void 0,r.length?r:void 0]);return t.length||r.length||a.length?o:i?[i]:Object(l.a)()}));var V=Object(m.a)().propsFromState((()=>({fetchStatus:j,items:q()}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(y.createLocalApiErrorHandlerWithContextFactory)("TYPEAHEAD_DROPDOWN_CONTAINER_CONTEXT"),fetchTypeaheadIfNeeded:L,fetchUsersPresenceIfNeeded:u.b.fetchManyIfNeeded,prefetchTypeaheadUsersIfNeeded:U.b}))).withAnalytics({element:"typeahead"}),W=a("8UdT"),G=a("kIAd"),Y=a("Rp9C"),Q=a("tAeL"),$=a("v6aA"),X=a("VY6S"),K=a("w6IS");class Z extends i.a.Component{constructor(e,t){super(e,t),this._fetchTypeaheadResultsIfNeeded=e=>{e.query&&e.fetchTypeaheadIfNeeded({q:e.query,src:e.source,result_type:e.filter.join(","),context_text:e.contextText,topic_type:e.topicType},{communityId:e.communityId,trustedFriendsId:e.trustedFriendsId}).catch(e.createLocalApiErrorHandler({}))},this._handleItemClick=(e,t)=>{const{analytics:a,onItemClick:s,query:n}=this.props;s(e,t);const r=Y.a.forTypeaheadResult(e,t),i=r?[r]:void 0;a.scribe({action:"click",data:{search_details:{query:n},targets:i}})},this._scribeResults=()=>{const{analytics:e,items:t,query:a}=this.props;e.scribe({action:"impression",data:{items:Y.a.forTypeaheadResults(t),search_details:{query:a}}})},this._debouncedFetchTypeaheadResultsIfNeeded=Object(X.a)(this._fetchTypeaheadResultsIfNeeded,250),this.state={shouldShowPrefetchResults:!0}}componentDidMount(){const{createLocalApiErrorHandler:e,prefetchTypeaheadUsersIfNeeded:t}=this.props;this._debouncedFetchTypeaheadResultsIfNeeded(this.props),t().catch(e({}))}componentWillUnmount(){clearTimeout(this._prefetchResultsTimer)}componentDidUpdate(e){const{createLocalApiErrorHandler:t,fetchUsersPresenceIfNeeded:a,filter:s,items:n,onItemsChanged:r,query:i,shouldDeferPrefetch:o,source:c}=this.props,{filter:l,query:u,source:h}=e,{loggedInUserId:p}=this.context,m=this.context.featureSwitches.isTrue("voice_rooms_typeahead_audiospace_ring_enabled")&&p;if(null!=n&&n.length&&n!==e.items&&(this._scribeResults(),r&&r(n),m)){const e=Object(K.a)(n).filter((e=>e.type===W.b.User)).map((e=>e.id));e&&a(e).catch(t({}))}i===u&&s===l&&c===h||(this._debouncedFetchTypeaheadResultsIfNeeded(this.props),o&&(clearTimeout(this._prefetchResultsTimer),this.setState({shouldShowPrefetchResults:!1}),this._prefetchResultsTimer=setTimeout((()=>{this.props.query&&this.props.fetchStatus!==d.a.LOADED&&this.setState({shouldShowPrefetchResults:!0})}),G.a)))}render(){const{analytics:e,communityId:t,contextText:a,createLocalApiErrorHandler:s,dropdownRef:r,fetchStatus:o,fetchTypeaheadIfNeeded:c,fetchUsersPresenceIfNeeded:l,filter:u,getTopicExactMatch:h,getUserExactMatch:p,injectedItems:m,items:y,maxEvents:f,maxTopics:b,onItemClick:_,onItemsChanged:g,orderResults:w,prefetchTypeaheadUsersIfNeeded:v,query:I,shouldDeferPrefetch:C,topicType:x,trustedFriendsId:E,userLimit:S,...T}=this.props,D=I&&o!==d.a.LOADED,R=D&&!this.state.shouldShowPrefetchResults?m:y;return i.a.createElement(Q.a,n()({},T,{isLoading:!!D,items:R,onItemClick:this._handleItemClick,query:I,ref:r}))}}Z.contextType=$.a,Z.defaultProps={filter:[C.a.Users],injectedItems:[],maxEvents:3,maxTopics:1};const J=i.a.forwardRef(((e,t)=>i.a.createElement(Z,n()({},e,{dropdownRef:t})))),ee=V.forwardRef(J);t.a=ee},OhSZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a("kYxP");var s=a("ERkP"),n=a.n(s),r=a("MMRb"),i=a("XnpN"),o=a("3XMw"),c=a.n(o),l=a("MWbm"),d=a("jV+4"),u=a("pjBI"),h=a("t62R"),p=a("rHpw"),m=a("p9G8");const y=c.a.cfd94063,f=c.a.b93ba92c,b=(e=[])=>e.map((({data:e})=>e)),_=p.a.create((e=>({title:{maxWidth:"50%"},dmGroup:{display:"flex",flexDirection:"column"}}))),g=({conversation:e,newConversationParticipants:t,perspective:a})=>{if(e){if(e.type===r.CONVERSATION_TYPE.ONE_TO_ONE){const[t]=Object(i.a)(e,a).map((({user:e})=>e));return t.name}return Object(m.a)(e,a)}{const e=b(t);return Object(m.b)(e,a)}};t.b=({conversation:e,isConversationSearchTitle:t=!1,isMessageSearchTitle:a=!1,newConversationParticipants:s,perspective:o,renderTimestamp:c,textColor:p="text",textSize:g,titleWeight:w="bold",withParticipantsCount:v=!1,withScreenName:I=!0,withVDLRefresh:C=!1})=>{if(e){const s=c?c():null;if(e.type===r.CONVERSATION_TYPE.ONE_TO_ONE){const[r]=Object(i.a)(e,o).map((({user:e})=>e)),c=n.a.createElement(d.a,{color:p,isProtected:r.protected,isVerified:r.verified,name:r.name,nameSize:g,screenName:r.screen_name,weight:w,withLink:!1,withScreenName:I});return C&&!t||a?n.a.createElement(u.a,null,c,s):c}{const{participants:r}=e,i=r.length+(C?-1:0);if(t)return n.a.createElement(u.a,{color:p},n.a.createElement(h.b,{color:p,numberOfLines:1,size:g,style:_.title,weight:w},Object(m.a)(e,o,t)),C?null:n.a.createElement(h.b,{color:"gray700",numberOfLines:1,weight:"normal"},y({peopleCount:i})));const c=n.a.createElement(h.b,{color:p,numberOfLines:1,size:g,weight:w},Object(m.a)(e,o,t));return C&&!t||a?n.a.createElement(l.a,{style:_.dmGroup},n.a.createElement(u.a,null,c,s),v&&n.a.createElement(h.b,{color:"gray700",numberOfLines:1,size:g},f({peopleCount:i}))):c}}{const e=b(s);return n.a.createElement(h.b,{color:p,numberOfLines:1,size:g,weight:w},Object(m.b)(e,o))}}},V5Qi:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("AQ79");const n=(e,t)=>e[s.c]?e[s.c].conversations[t]:null},XnpN:function(e,t,a){"use strict";a("kYxP");var s=a("aWyx"),n=a("t0aI");const r=(e=0)=>new Date(Number(e)),i=(e,t)=>r(e.join_time)-r(t.join_time),o=({user:e},{user:t})=>Object(n.a)(e.id_str,t.id_str);var c=a("VIKJ");t.a=(e,t)=>{const{created_by_user_id:a,participants:n,type:r}=e,[l,d]=Object(c.a)(n,(({user:e})=>e.id_str===t));return d.length?r===s.a.GROUP&&1===d.length?[...l,...d]:a?d.sort(((...e)=>(t,a)=>e.map((e=>e(t,a))).filter((e=>!!e))[0]||0)((e=>({user:t},{user:a})=>{switch(e){case t.id_str:return-1;case a.id_str:return 1;default:return 0}})(a),i,o)):d:l}},Yatk:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=e=>{if(e)return{blocking:e.blocking,can_dm:e.can_dm,can_media_tag:e.can_media_tag,created_at:e.created_at,description:e.description,entities:e.entities,followed_by:e.followed_by,followers_count:e.followers_count,following:e.following,friends_count:e.friends_count,id:e.id,id_str:e.id_str,name:e.name,profile_image_url_https:e.profile_image_url_https,protected:e.protected,screen_name:e.screen_name,verified:e.verified}}},ZcYN:function(e,t,a){"use strict";a.d(t,"b",(function(){return ie})),a.d(t,"a",(function(){return le}));var s=a("ERkP"),n=a.n(s),r=a("+Kfv"),i="typeaheadResult",o=a("v6aA"),c=a("AQOc"),l=a("V5Qi"),d=a("G6rE"),u=a("rxPX");const h=(e,t)=>t.conversationId,p=(e,t)=>Object(l.a)(e,h(0,t));var m=Object(u.a)().propsFromState((()=>({conversationId:h,conversation:p,users:d.e.selectAll}))).adjustStateProps((({conversation:e,conversationId:t,users:a})=>{const s={conversation:void 0};return null!=e&&e.data&&(s.conversation=Object(c.b)(e.data,void 0,a)),s})),y=a("aA19"),f=a("OhSZ"),b=a("5mJL"),_=a("rHpw");const g=_.a.create((e=>({root:{cursor:"pointer",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,width:"100%"},avatarColumn:{flexGrow:1,maxWidth:e.spaces.space40,minWidth:"32px"},bodyColumn:{flexGrow:7,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},disabled:{opacity:.6,backgroundColor:e.colors.gray0}})));var w=m((({conversation:e,isDisabled:t,isSelected:a,perspective:s})=>{const{featureSwitches:r}=n.a.useContext(o.a),i=r.isTrue("dm_vdl_enabled")&&r.isTrue("dm_vdl_inbox_p0_enabled");return e?n.a.createElement(b.a,{avatarCell:n.a.createElement(y.a,{conversation:e,perspective:s,size:"xLarge"}),avatarCellStyle:g.avatarColumn,avatarSize:"xLarge",cellStyle:g.bodyColumn,style:[g.root,!a&&t&&g.disabled]},n.a.createElement(f.b,{conversation:e,perspective:s,withParticipantsCount:!0,withVDLRefresh:i}),le({isSelected:a})):null})),v=a("MWbm"),I=a("LbZ7"),C=a("t62R"),x=a("9Xij"),E=a("TIdA"),S=a("A91F");class T extends n.a.PureComponent{render(){const{event:e,image:t,supportText:a}=this.props;return n.a.createElement(v.a,{style:R.root},n.a.createElement(I.a,{withGutter:!0},n.a.createElement(v.a,{style:R.bodyColumn},a?n.a.createElement(C.b,{color:"gray700",size:"subtext2"},a):null,n.a.createElement(C.b,{numberOfLines:1},e)),t?n.a.createElement(v.a,{style:R.coverContainer},n.a.createElement(x.a,{ratio:1},n.a.createElement(E.a,{accessibilityLabel:"",aspectMode:S.a.SQUARE,image:t}))):null))}}const D="100px",R=_.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},bodyColumn:{flexGrow:7,justifyContent:"center"},coverContainer:{backgroundColor:e.colors.gray200,borderRadius:e.borderRadii.small,flexGrow:1,justifyContent:"flex-end",maxHeight:D,maxWidth:D,overflow:"hidden",width:"25%"}})));var k=T,O=a("5T6p"),L=(a("qd3W"),a("MvUL"),a("yyPN")),P=a.n(L);var U=a("FiRh"),N=a("j7Bv"),F=a("EHV7"),j=a("Gfoi");const M=_.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},context:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:e.fontSizes.subtext2,paddingRight:e.spaces.space4,width:e.fontSizes.subtext2},disabled:{backgroundColor:e.colors.gray0},searchIcon:{marginRight:e.spaces.space12,borderWidth:0,backgroundColor:"none"},searchIconCell:{flexDirection:"row",alignItems:"center"},wrapperCellStyle:{justifyContent:"center"}})));var A=function(e){const{featureSwitches:t}=n.a.useContext(o.a),{isDisabled:a,query:s,resultContext:r,showIcon:i,style:c,topic:l}=e,d=function(e,t,a=!1){const s=P()(e),n=e.toLowerCase().indexOf(t.toLowerCase()),r=n+t.length;let i;if(0===s.length){const t=a?[n>0?[0,n]:void 0,[r,e.length]].filter(Boolean):[[n,r]];i=[{highlights:-1!==n?t:void 0,text:e,entityType:"text",prefix:""}]}else{const t=s.flatMap((({indices:t},a,s)=>{const n=0===a?0:s[a-1].indices[1],r=a===s.length-1,i=[];return n!==t[0]&&i.push(e.slice(n,t[0])),i.push(e.substring(t[0],t[1])),r&&e.length!==t[1]&&i.push(e.slice(t[1])),i}));let o=0;const c=t.map(((e,t,a)=>{o+=t>0?a[t-1].length:0;const s=e.length;return{runningTotal:o,containsQuery:-1!==n&&o+s>=n&&o<r}}));i=t.map(((e,t)=>{var s;const{containsQuery:i,runningTotal:o}=c[t],l=e.includes("#");let d;if(a&&!i)d=[[0,e.length]];else if(i){const t=o<n?n-o:0,s=o+e.length<r?e.length:r-o,i=l?t-1:t,c=l?s-1:s;d=a?[i>0?[0,i]:void 0,c!==e.length-1?[c,e.length]:void 0].filter(Boolean):[[i,c]]}const u=l?`${null==e?void 0:e.replace("#","")}`:e;return{highlights:null!=(s=d)&&s.length?d:void 0,text:u,entityType:l?"hashtag":"text",prefix:l?"#":""}}))}return i}(l,t.isTrue("responsive_web_typeahead_reverse_bolding_enabled")?s:"",true),u=n.a.createElement(C.b,null,d.map(((e,t)=>n.a.createElement(U.b,{key:`${e.text}${t}`,part:e})))),h=n.a.createElement(n.a.Fragment,null,u,r?n.a.createElement(v.a,{style:M.context},r&&r.types[0]&&"followable_topic"===r.types[0].type?n.a.createElement(F.a,{style:M.icon}):null,n.a.createElement(C.b,{color:"gray700"},r.display_string||" ")):null);return n.a.createElement(v.a,{style:[M.root,a&&M.disabled,c]},i?(e=>{const t=n.a.createElement(N.a,{Icon:j.a,color:"neutral",size:"xxxLarge",style:M.searchIcon});return n.a.createElement(b.a,{avatarCell:t,avatarCellStyle:M.searchIconCell,avatarSize:"xxxLarge",cellStyle:M.wrapperCellStyle},e)})(h):h)},H=(a("kYxP"),a("M0jS"));const z=(e,t)=>Object(H.c)(e,t.userId);var B=Object(u.a)().propsFromState((()=>({userSpace:z}))),q=a("3XMw"),V=a.n(q),W=a("tocL"),G="TypeaheadUser",Y=a("GZwR"),Q=a("IMA+");const $=V.a.ae2205d1,X=V.a.d960b55b,K=V.a.fd06b02f,Z=Object.freeze({num_of_followers:W.a.Follow,bio:W.a.TextOnly,location:W.a.Location,num_tweets:W.a.NewTweets,follow_relationship:W.a.Follow,followers_follow:W.a.Follow,social_proof:W.a.SocialProof,follow_relationship_mutual_follow:W.a.FollowMutual,follow_relationship_followed:W.a.FollowFollowed,follow_relationship_following:W.a.FollowFollowing});class J extends n.a.PureComponent{constructor(...e){super(...e),this._handleAvatarClick=()=>{const{userSpace:e}=this.props;e||this._handleClick()},this._handleClick=()=>{const{isDisabled:e,item:t,onItemClick:a}=this.props;a&&a(t,!!e)}}render(){const{avatarUri:e,decoration:t,disabledMessage:a,displayNameLabel:s,isDisabled:r,isProtected:i,isVerified:o,name:c,screenName:l,source:d,userId:u,userSpace:h,withNewTypeaheadUI:p}=this.props,{featureSwitches:m}=this.context,y=this._getSocialContext(),f=this._getResultContext()||y,b=d===Y.d.SearchBox,_=h&&m.isTrue("voice_rooms_typeahead_audiospace_ring_enabled")?h:void 0;return _&&(_.accessibilityLabel=K({screenName:l})),n.a.createElement(Q.a,{avatarSize:"xLarge",avatarUri:e,decoration:t,disabledMessage:r?a:void 0,displayMode:p?"ExperimentalUserTypeahead":"UserCompact",displayNameLabel:s,isDisabled:r,isProtected:i,isVerified:o,name:c,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:b?_:void 0,screenName:l,socialContext:f,testID:G,userId:u,withInteractiveStyling:!1,withLink:!1})}_getSocialContext(){const{socialContext:e}=this.props;if(!e||!e.following)return;const t=e.followed_by?$:X;return{contextType:W.a.Follow,text:t}}_getResultContext(){const{resultContext:e,source:t}=this.props;if(!e||!e.display_string||!e.types||t!==Y.d.SearchBox)return;return{contextType:(e.types.length?Z[e.types[0].type]:void 0)||W.a.TextOnly,text:e.display_string}}}J.contextType=o.a,J.defaultProps={withNewTypeaheadUI:!1};var ee=B.forwardRef(J),te=a("htQn"),ae=a("iySH"),se=a("IMYl");const ne={viewType:"typeahead_result"},re=({children:e})=>e;function ie(e){return n.a.createElement(re,{item:e.item},n.a.createElement(oe,e))}class oe extends n.a.Component{constructor(e,t){super(e,t),this._onViewRef=e=>{this._viewRef=e;const{onRef:t}=this.props;t&&t(e)},this._handleClick=()=>{const{item:e}=this.props;e.type!==Y.b.User&&this.props.onClick&&this.props.onClick(e,this.isDisabled)},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")&&e.source===Y.d.SearchBox}componentDidMount(){this._loaded=!0,this._viewRef&&(this._rafId=window.requestAnimationFrame((()=>{this._viewRef&&this._viewRef.setNativeProps({style:{opacity:1}})})))}componentDidUpdate(e){const{onRef:t}=this.props;t&&t!==e.onRef&&this._viewRef&&t(this._viewRef)}componentWillUnmount(){this._rafId&&window.cancelAnimationFrame(this._rafId)}render(){const{domId:e,isDisabled:t,isFocused:a,isInMultiSelect:s,isSelected:o,style:c}=this.props;return n.a.createElement(r.a,{behavioralEventContext:ne},n.a.createElement(v.a,{accessibilityRole:"option",accessibilityState:{checked:!(!s||!o)||void 0,selected:t?void 0:s&&o||!s&&!!a},nativeID:e,testID:i},n.a.createElement(te.a,{accessibilityRole:s?"checkbox":"button",disabled:t,focusable:!0,onPress:this._handleClick,style:[a&&ce.focused,ce.transitionStyles,this._loaded&&ce.loaded,c],viewRef:this._onViewRef},this._renderResult())))}_renderResult(){const{disabledMessage:e,getUserDisplayNameLabel:t,isDisabled:a,isSelected:s,item:r,onClick:i,renderUserDecoration:o,source:c}=this.props;switch(r.type){case Y.b.User:{const{data:l}=r,d=o?o({userId:l.id_str,user:l,isSelected:s}):void 0,u=t?t(r,l):void 0;return n.a.createElement(ee,{avatarUri:l.profile_image_url_https,canDm:!!l.can_dm,canMediaTag:!!l.can_media_tag,decoration:d||void 0,disabledMessage:e,displayNameLabel:u,isDisabled:a,isProtected:!!l.protected,isVerified:!!l.verified,item:r,name:l.name,onItemClick:i,resultContext:l.result_context,screenName:l.screen_name,socialContext:l.social_context,source:c,userId:l.id_str,withNewTypeaheadUI:this._withNewTypeaheadUI})}case Y.b.Event:{const{data:e}=r;return this._withNewTypeaheadUI?n.a.createElement(O.a,{image:e.primary_image&&e.primary_image.original_info,style:ce.itemPadding,supportText:e.supporting_text,title:e.topic,withNewTypeaheadUI:!0}):n.a.createElement(k,{event:e.topic,image:e.primary_image&&e.primary_image.original_info,supportText:e.supporting_text})}case Y.b.Hashtag:case Y.b.Topic:{const{query:e}=this.props,{data:t}=r,s=c===Y.d.SearchBox;return n.a.createElement(A,{isDisabled:a,query:e||"",resultContext:t.result_context,showIcon:s,style:s?ce.itemPadding:void 0,topic:t.topic})}case Y.b.DMConversation:return!!this.context.loggedInUserId&&n.a.createElement(w,{conversationId:r.id,isDisabled:a,isSelected:s,perspective:this.context.loggedInUserId});case Y.b.SettingGroup:{const{text:e}=r.data;return n.a.createElement(v.a,{style:ce.navigationLink},n.a.createElement(C.b,{style:ce.content,weight:"bold"},e),n.a.createElement(ae.a,{style:ce.icon}))}case Y.b.Setting:{const{text:e}=r.data;return n.a.createElement(v.a,{style:ce.navigationLink},n.a.createElement(C.b,{style:ce.content},e),n.a.createElement(ae.a,{style:ce.icon}))}case Y.b.NoResult:{const{data:e}=r,{text:t}=e;return n.a.createElement(C.b,{style:ce.noResult},t)}default:return null}}get isDisabled(){return!!this.props.isDisabled}}oe.contextType=o.a;const ce=_.a.create((e=>({checkIcon:{color:e.colors.primary},navigationLink:{alignItems:"center",flexDirection:"row",flexGrow:1,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},content:{flexGrow:1,flexShrink:1},icon:{color:e.colors.gray700,paddingLeft:e.spaces.space12,flexShrink:0},noResult:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},itemPadding:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},loaded:{opacity:1},focused:{backgroundColor:e.colors.gray0},transitionStyles:{transitionProperty:"opacity",transitionDuration:"250ms",opacity:0}}))),le=({isSelected:e})=>e?n.a.createElement(se.a,{accessibilityHidden:!0,style:ce.checkIcon}):null},aA19:function(e,t,a){"use strict";var s=a("ERkP"),n=a.n(s),r=a("aWyx"),i=a("XnpN"),o=a("3XMw"),c=a.n(o),l=a("aI6n"),d=a("rHpw"),u=a("TIdA"),h=a("A91F"),p=a("jhWN"),m=a("9Xij"),y=a("Znyr"),f=a("cm6r"),b=a("U+bB"),_=a("MWbm");const g=c.a.fd48249b,w=d.a.create((e=>({circle:{borderRadius:e.borderRadii.infinite,overflow:"hidden"},container:{height:"auto",width:"100%"},itemAccessory:{top:-e.spacesPx.space24+e.spacesPx.space1,right:-e.spacesPx.space16-e.spacesPx.space1},userDecoration:{fontSize:e.fontSizes.subtext3,position:"absolute",backgroundColor:e.colors.gray100,marginLeft:e.spaces.space8,boxSizing:"border-box",width:e.spaces.space24,height:e.spaces.space24}}))),v=d.a.create((e=>({container:{flexDirection:"row"},left:{flex:1},right:{flex:1,marginLeft:e.borderWidths.small,marginRight:`calc(-1 * ${e.borderWidths.small})`}}))),I=d.a.create((e=>({container:{flexDirection:"column"},top:{flex:1,marginBottom:e.borderWidths.small},bottom:{flex:1}}))),C=({left:e,right:t})=>n.a.createElement(_.a,{style:v.container},n.a.createElement(_.a,{style:v.left},e),n.a.createElement(_.a,{style:v.right},t)),x=({bottom:e,top:t})=>n.a.createElement(_.a,{style:I.container},n.a.createElement(_.a,{style:I.top},t),n.a.createElement(_.a,{style:I.bottom},e));t.a=e=>{const t=t=>{const{size:a}=e;return n.a.createElement(_.a,{key:t.id_str,style:w.container},n.a.createElement(p.a,{size:a||"xxLarge",uri:t.profile_image_url_https}))},a=e=>{const t=e.length,a=e.map(((e,a)=>{const s=2===t||3===t&&0===a?.5:1;return n.a.createElement(_.a,{key:e.id_str,style:w.container},n.a.createElement(p.a,{aspectRatio:s,shape:"none",size:"custom",uri:e.profile_image_url_https}))}));if(2===t)return n.a.createElement(m.a,{ratio:1},n.a.createElement(C,{left:a[1],right:a[0]}));{const e=n.a.createElement(x,{bottom:a[2],top:a[1]}),t=a[0];return n.a.createElement(C,{left:e,right:t})}},{conversation:s,link:o,perspective:c,withBadge:v}=e,I=s&&s.avatar_image_https,E=s?Object(i.a)(s,c).map((({user:e})=>e)):[],S=E.slice(0,3),T=(e=>{const t=e&&e.avatar&&e.avatar.image&&e.avatar.image.original_info;return t?n.a.createElement(u.a,{accessibilityLabel:"",aspectMode:h.a.SQUARE,backgroundColor:d.a.theme.colors.gray50,image:t,rounded:!0}):null})(s)||(e=>e?n.a.createElement(b.a,{source:e}):null)(I)||(e=>{const s=e.length;return 0===s?null:1===s?t(e[0]):n.a.createElement(_.a,{style:w.circle},a(e))})(S),D=o||((e,t)=>{if(e)return e.type===r.a.GROUP?`/messages/${e.conversation_id}/participants`:e.type===r.a.ONE_TO_ONE?`/${t[0].screen_name}`:void 0})(s,E),R=v&&null!=s&&s.participants?s.participants.length-1:0;return T?n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{ratio:1},D?n.a.createElement(f.a,{interactiveStyles:null,link:D,testID:l.a.conversationAvatar},T):T),R?(({badgeCount:e})=>n.a.createElement(_.a,{style:w.itemAccessory},n.a.createElement(y.a,{count:e,standalone:!0,style:w.userDecoration,textColor:"text",truncatedCountFormatter:()=>"",unreadCountLabel:g,withTruncatedCount:!1})))({badgeCount:R}):null):null}},aI6n:function(e,t,a){"use strict";t.a={conversationAvatar:"DM_Conversation_Avatar",newDM:"NewDM_Button",untrustedThumbnail:"DM_Untrusted_Thumbnail"}},e5HP:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var s=a("ERkP"),n=a.n(s),r=a("t62R"),i=a("3XMw"),o=a.n(i),c=a("rHpw"),l=a("MWbm"),d=a("Lsrn"),u=a("k/Ka");const h=(e={})=>Object(u.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[d.a.root,e.style],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M12 1C5.92 1 1 5.92 1 12s4.92 11 11 11 11-4.92 11-11S18.08 1 12 1zm5.05 12.48c0 .48-.39.87-.88.87-.477 0-.87-.393-.87-.87V9.94l-6.85 6.85c-.163.166-.387.26-.62.26-.233 0-.457-.094-.62-.26-.338-.341-.338-.899 0-1.24l6.85-6.85h-3.54c-.477 0-.87-.393-.87-.87 0-.49.39-.88.87-.88h5.65c.11 0 .23.03.33.07.11.04.2.1.29.19.09.09.15.18.19.29.04.1.07.22.07.33v5.65z"})));h.metadata={width:24,height:24};var p=h,m=a("uFYP");const y=o.a.f1a1b790,f=o.a.if2bf8b3,b=o.a.f3624b5c,_=o.a.b4b3b113,g=o.a.be22205f,w=o.a.hcbbe447;class v extends n.a.Component{render(){const{color:e,nativeID:t,style:a,withCircleIcon:s}=this.props,i=s?p:m.a;return n.a.createElement(l.a,{style:[I.root,a]},n.a.createElement(i,{style:[I.icon,e&&I[e]]}),n.a.createElement(r.b,{color:e,nativeID:t,size:"subtext2"},this._getPromotedLabel()))}_getPromotedLabel(){const{contentAuthorId:e,label:t,promotedContent:a}=this.props,{adMetadataContainer:s,advertiser:n,advertiser_name:r,disclosure_type:i}=a,o=e&&n&&e===n.id_str,c="string"==typeof i&&"political"===i.toLowerCase(),l="string"==typeof i&&"issue"===i.toLowerCase(),d=!(!s||"POLITICAL"!==s.disclaimerType)||c,u=!(!s||"ISSUE"!==s.disclaimerType)||l,{removePromotedAttributionForPreroll:h}=s||{};let p;return p=t||(!r||o||h?d?b:u?g:f:d?_({fullName:r}):u?w({fullName:r}):y({fullName:r})),p}}v.defaultProps={color:"gray700",withCircleIcon:!1};const I=c.a.create((e=>({root:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.gray700,height:"1em",marginRight:e.spaces.space4,flexShrink:0},gray700:{color:e.colors.gray700},white:{color:e.colors.white}})))},o52z:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("VPAj");const n=Object(s.a)([]);Object(s.a)({})},p9G8:function(e,t,a){"use strict";a.d(t,"b",(function(){return u}));a("kYxP");var s=a("Xrkv"),n=a("aWyx"),r=a("XnpN"),i=a("3XMw"),o=a.n(i);const c=o.a.b5b7fb93,l=o.a.g755fcde,d=o.a.f6b1ff81;t.a=(e,t,a)=>{const{type:s,name:i,participants:o={}}=e;if(s===n.a.GROUP&&i)return i;if(!o.length)return;if(s===n.a.GROUP&&a)return c;const l=Object(r.a)(e,t).map((({user:e})=>e));return u(l,t,s)};const u=(e=[],t,a=n.a.GROUP)=>{const r=e.filter((e=>e.id_str!==t)).map((e=>e.name));switch(r.length){case 0:return l;case 1:{const[e]=r;return a===n.a.GROUP?d({name:e}):e}default:{const e=!0;return Object(s.a)(r,e)}}}},tAeL:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var s=a("ERkP"),n=a.n(s),r=a("+Kfv"),i=a("0yYu"),o=a("7nmT"),c=a.n(o),l=(a("kYxP"),a("3XMw")),d=a.n(l),u=a("kIAd"),h=a("JYMr"),p=a("rHpw");const m=d.a.f2b3fe06,y=p.a.create((e=>({hidden:{visibility:"hidden"}})));var f=({isLoading:e})=>{const[t,a]=n.a.useState(!1);return n.a.useEffect((()=>{let t;return e?t=setTimeout((()=>a(!0)),u.a):a(!1),()=>clearTimeout(t)}),[e]),n.a.createElement(h.a,{ariaValueText:t?m:"",indeterminate:t,style:!t&&y.hidden})},b=a("ZcYN"),_=a("MWbm"),g=a("oQhu"),w=a("w6IS"),v=a("MXDK");const I={viewType:"typeahead_dropdown"};class C extends n.a.Component{constructor(e,t){super(e),this._setFocusedItemRef=e=>{this._shouldScrollToFocusedItem&&e&&(Object(v.c)(this._getScrollParent(),e),this._shouldScrollToFocusedItem=!1)},this._resetScroll=()=>{const e=this._getScrollParent();e&&(e.scrollTop=0)},this._getFlattenedItems=Object(g.a)((e=>Object(w.a)(e))),this._handleItemClick=(e,t)=>{const{items:a,onItemClick:s}=this.props,n=this._getFlattenedItems(a).indexOf(e);e&&!t&&!this._shouldBlockInteractivity&&s(e,n),this._resetFocus()},this._getResultCount=()=>{const{items:e}=this.props;return this._getFlattenedItems(e).length},this._setFocusIndex=(e,t)=>{const{items:a,onItemFocusChanged:s}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),s&&s(this._getFlattenedItems(a)[e])},this._resetFocus=()=>{this._setFocusIndex(this.props.withItemAlwaysSelected?0:-1)},this.focusNext=()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const a=e+1>=t?0:e+1;this._setFocusIndex(a,!0)},this.focusPrevious=()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const a=e-1<0?t-1:e-1;this._setFocusIndex(a,!0)},this.hasFocusedItem=()=>{const{focusIndex:e}=this.state,t=this._getResultCount();return e>=0&&t>e},this.selectFocusedItem=()=>{const{focusIndex:e}=this.state,{getItemIsDisabled:t,items:a}=this.props;if(this.hasFocusedItem()){const s=this._getFlattenedItems(a)[e],n=!!t&&t(s,s.data);this._handleItemClick(s,n)}},this.state={focusIndex:e.withItemAlwaysSelected?0:-1}}componentDidMount(){this._resetFocus()}componentWillUnmount(){clearTimeout(this._interactivityTimeout)}componentDidUpdate(e){e.items!==this.props.items&&(this._resetFocus(),this._resetScroll(),this._interactivityTimeout&&clearTimeout(this._interactivityTimeout),this._shouldBlockInteractivity=!0,this._interactivityTimeout=setTimeout((()=>{this._shouldBlockInteractivity=!1}),500))}render(){const{domId:e,isLoading:t,items:a,renderCallout:s,renderHeader:i,renderNoResultsState:o,selectedItems:c,style:l}=this.props,d=!(!t&&!a.length);let u=0;const h=!!c;return d?n.a.createElement(r.a,{behavioralEventContext:I},n.a.createElement(_.a,{accessibilityMultiSelectable:h,accessibilityRole:"listbox",nativeID:e,style:l},s?s():null,n.a.createElement(f,{isLoading:!!t}),i?i():null,a.length?a.map(((e,t)=>{const s=!Array.isArray(a[t-1])&&t>0,n=t<a.length-1,r=Array.isArray(e)?this._renderTypeaheadGroup(e,u,s,n):this._renderTypeaheadItem(e,u);return u+=Array.isArray(e)?e.length:1,r})):null)):o?o():null}_renderTypeaheadGroup(e,t,a,s){const{withSectionDivider:r}=this.props;return n.a.createElement(n.a.Fragment,{key:`typeaheadGroup-${t}`},r&&a?n.a.createElement(i.a,{key:`typeaheadDividerTop-${t}`}):null,e.map(((e,a)=>this._renderTypeaheadItem(e,t+a))),r&&s?n.a.createElement(i.a,{key:`typeaheadDividerBottom-${t}`}):null)}_renderTypeaheadItem(e,t){const{ariaDescendantId:a,getItemDisabledMessage:s,getItemIsDisabled:r,getUserDisplayNameLabel:i,query:o,renderUserDecoration:c,selectedItems:l,source:d}=this.props,{focusIndex:u}=this.state,h=!(!l||!e.id)&&l.indexOf(e.id)>=0,p=!!l,m=u===t,y=r&&r(e,e.data),f=s&&s(e,e.data);return n.a.createElement(b.b,{disabledMessage:f,domId:m?a:void 0,getUserDisplayNameLabel:i,isDisabled:y,isFocused:m,isInMultiSelect:p,isSelected:h,item:e,key:`typeaheadItem-${t}-${e.id||""}`,onClick:this._handleItemClick,onRef:m?this._setFocusedItemRef:void 0,query:o,renderUserDecoration:c,source:d})}_getScrollParent(){if(!this._scrollParent){const e=Object(v.a)(c.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}}},uFYP:function(e,t,a){"use strict";var s=a("ERkP"),n=a.n(s),r=a("Lsrn"),i=a("k/Ka");const o=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M20.75 2H3.25C2.007 2 1 3.007 1 4.25v15.5C1 20.993 2.007 22 3.25 22h17.5c1.243 0 2.25-1.007 2.25-2.25V4.25C23 3.007 21.993 2 20.75 2zM17.5 13.504c0 .483-.392.875-.875.875s-.875-.393-.875-.876V9.967l-7.547 7.546c-.17.17-.395.256-.62.256s-.447-.086-.618-.257c-.342-.342-.342-.896 0-1.237l7.547-7.547h-3.54c-.482 0-.874-.393-.874-.876s.392-.875.875-.875h5.65c.483 0 .875.39.875.874v5.65z"})));o.metadata={width:24,height:24},t.a=o},woHV:function(e,t,a){"use strict";a("ERkP");var s=a("k/Ka"),n=a("rHpw").a.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}});t.a=e=>{const{style:t,...a}=e;return Object(s.a)("form",{...a,action:"#",style:[n.initial,t]})}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.Typeahead~bundle.Communities~bundle.Delegate~bundle.LoggedOutHome~bundle.Search.68da9e45.js.map
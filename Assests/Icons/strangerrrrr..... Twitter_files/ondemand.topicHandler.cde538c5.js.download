(window.webpackJsonp=window.webpackJsonp||[]).push([[359],{E3Hq:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var o=n("Rp9C"),c=n("XcJG");const a=({feedbackItems:e,topic:t,topicItemContent:n})=>{const o=n.topicFunctionalityType===c.b.Recommendation,a=1===(null==e?void 0:e.length)?e[0].onClick:void 0;return!(null!=t&&t.not_interested)&&!(null!=t&&t.following)&&o?a:void 0},r=e=>o.a.forTopic(e.content.topicId,e.itemMetadata.clientEventInfo)},UnyZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=Object.freeze({Active:"active",Expand:"expand",Remove:"remove"})},YMZp:function(e,t,n){"use strict";n.r(t);var o=n("ezF+"),c=n("VPAj"),a=n("E3Hq"),r=n("ERkP"),i=n.n(r),s=n("wtjx"),l=n("Zejx"),d=n("rxPX");const p=(e,t)=>l.a.select(e,t.entry.content.topicId);var u=Object(d.a)().propsFromState((()=>({topic:p}))).propsFromActions((()=>({saveAsRecentSearch:s.a}))),h=n("fRsM"),m=n("XcJG"),b=n("Irs7");const f=e=>{const t=Object(b.b)(),{entry:{content:n},feedbackItems:o,saveAsRecentSearch:c,shouldStoreTypeaheadItem:r,topic:s}=e;if(i.a.useEffect((()=>{s&&t.scribeAction("impression")}),[]),!s)return null;const l=Object(a.a)({feedbackItems:o,topic:s,topicItemContent:n}),d=n.topicDisplayType===m.a.Basic;return i.a.createElement(h.a,{notInterestedOnClick:l,saveAsRecentSearch:c,shouldStoreTypeaheadItem:r,topic:s,withIcon:d})};var y=u(i.a.memo(f));t.default=e=>o.b({component:y,isFocusable:Object(c.a)(!0),getScribeDataItem:a.b,shouldDisplayBorder:Object(c.a)(!1)}).getHandler((()=>e))},"aV/s":function(e,t,n){"use strict";n("kYxP");var o=n("ERkP"),c=n.n(o),a=n("t62R"),r=n("3XMw"),i=n.n(r),s=n("I4+6"),l=n("cm6r"),d=n("UnyZ"),p=n("rHpw"),u=n("MWbm"),h=n("hOZg"),m=n("iY63"),b=n("IMYl");const f={active:i.a.e557ad8d,expand:i.a.e3a58c27,remove:i.a.h517e8d8};class y extends c.a.PureComponent{constructor(...e){super(...e),this._handleSecondaryClick=()=>{const{secondaryAction:e}=this.props;e&&e.onSecondaryClick()}}render(){const{accessibilityLabel:e,avatar:t,compact:n,disabled:o,link:r,mode:i,onClick:d,secondaryAction:h,selected:m,style:b,text:y}=this.props,v=this._renderIcon(!0,i),w=h&&this._renderIcon(!1,h.mode),g=[I.root,n&&I.compact,o&&I.disabled,m&&I.selected,b],k=[I.content,v&&I.withIcon,t&&(n&&I.withAvatarImageCompact||I.withAvatarImage)],S=s.a.generate({backgroundColor:m?p.a.theme.colors.primary:"transparent",color:m?p.a.theme.colors.white:p.a.theme.colors.primary});return c.a.createElement(u.a,{style:g},c.a.createElement(l.a,{accessibilityLabel:e||(i?f[i]:""),disabled:o,interactiveStyles:S,link:r,onPress:d,style:k},this._renderAvatar(),c.a.createElement(a.b,{color:m?"whiteOnColor":"text",numberOfLines:1,selectable:!1,style:I.text,weight:"bold"},y),v),h?c.a.createElement(l.a,{accessibilityLabel:h.accessibilityLabel||(h.mode?f[h.mode]:""),disabled:o||h.disabled,hoverLabel:{label:h.hoverLabel||(h.mode?f[h.mode]:"")},interactiveStyles:S,onPress:this._handleSecondaryClick,style:I.secondaryControl},c.a.createElement(u.a,{style:I.secondaryBorder},w)):null)}_renderIcon(e=!0,t){const{selected:n}=this.props,o=[I.icon,n&&I.iconSelected],a=[I.icon];switch(t){case d.a.Remove:return c.a.createElement(h.a,{style:[I.dismissIcon,e&&o]});case d.a.Expand:return c.a.createElement(m.a,{style:e?o:a});case d.a.Active:return c.a.createElement(b.a,{style:o});default:return null}}_renderAvatar(){const{avatar:e,compact:t}=this.props;return e?c.a.createElement(u.a,{style:[I.avatarContainer,t?I.avatarCompact:I.avatar]},e):null}}y.defaultProps={compact:!1,disabled:!1,selected:!1};const I=p.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:"1px",flexDirection:"row",minHeight:e.spaces.space40,overflow:"hidden"},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingHorizontal:e.spaces.space16},text:{width:"100%"},compact:{minHeight:e.spaces.space32},disabled:{borderColor:e.colors.gray50},selected:{backgroundColor:e.colors.primary,borderColor:e.colors.primary},avatar:{height:e.spaces.space32,width:e.spaces.space32},avatarCompact:{height:e.spaces.space24,width:e.spaces.space24},avatarContainer:{justifyContent:"center",marginRight:e.spaces.space8},withAvatarImage:{paddingLeft:`calc(${e.spaces.space2} * 2)`},withAvatarImageCompact:{paddingLeft:`calc(${e.spaces.space1} * 3)`},icon:{color:e.colors.primary,flexShrink:0,marginLeft:e.spaces.space12},iconSelected:{color:e.colors.whiteOnColor},withIcon:{paddingRight:e.spaces.space12},dismissIcon:{color:e.colors.gray300},secondaryControl:{flexShrink:0,justifyContent:"center"},secondaryBorder:{borderLeftColor:e.colors.borderColor,borderLeftWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space12}})));t.a=y},fRsM:function(e,t,n){"use strict";var o=n("ERkP"),c=n.n(o),a=n("LWCC"),r=n("3XMw"),i=n.n(r),s=n("EHV7"),l=n("YICZ"),d=n("3IPs"),p=n("X04g"),u=n("MWbm"),h=n("Irs7"),m=n("hxu0"),b=n("htQn"),f=n("t62R"),y=n("j7Bv"),I=n("rHpw"),v=n("v6aA");const w=i.a.a2a3824a;let g=0;class k extends c.a.Component{constructor(e,t){super(e,t),this._topicLink={pathname:`/i/topics/${this.props.topic.id}`,state:{referringScribeNamespace:{...this.props.analytics.contextualScribeNamespace,action:"click"}}},this._handleOnClick=()=>{const{saveAsRecentSearch:e,shouldStoreTypeaheadItem:t,topic:{description:n,id:o,name:c}}=this.props;e&&t&&t(p.a.ItemType.TOPIC)&&e({topic:{id:o,name:c,description:n||"",type:d.a.Topic}}),this._handleScribe("click")},this._topicDomId=`topic${g}`,this._nameDomId=`topic-name${g}`,this._descriptionDomId=`topic-description${g}`,this._followButtonDomId=`topic-follow-button${g}`,this._notInterestedButtonDomId=`topic-not-interested-button${g}`,g+=1}render(){const{educateOnFollow:e,isInSidebar:t,nameWeight:n,notInterestedOnClick:o,topic:r}=this.props,{description:i,name:s}=r,{loggedInUserId:d}=this.context;return c.a.createElement(b.a,{accessibilityLabelledBy:[this._topicDomId,this._nameDomId,this._descriptionDomId,this._followButtonDomId,this._notInterestedButtonDomId].join(" "),interactiveStyles:this._topicLink?void 0:null,link:this._topicLink,onClick:this._topicLink?this._handleOnClick:void 0,style:[S.root,S.flexStart],withDarkerInteractiveBackground:t},c.a.createElement(u.a,{style:S.topic},c.a.createElement(u.a,{accessibilityLabel:w,nativeID:this._topicDomId}),this._renderIcon(),c.a.createElement(u.a,{style:S.text},c.a.createElement(f.b,{nativeID:this._nameDomId,weight:n,withInteractiveStyling:!!this._topicLink},s),i?c.a.createElement(f.b,{color:"gray700",nativeID:this._descriptionDomId,numberOfLines:2},i):null)),c.a.createElement(u.a,{style:S.buttons},c.a.createElement(a.a,{educateOnFollow:e,nativeID:this._followButtonDomId,topic:r}),d&&o?c.a.createElement(l.a,{nativeID:this._notInterestedButtonDomId,onPress:o,style:S.marginLeft,topicId:r.id}):null))}_renderIcon(){const{withIcon:e}=this.props;return e?c.a.createElement(y.a,{Icon:s.a,size:"large",style:S.icon}):null}_handleScribe(e){const{analytics:t}=this.props;t.scribeAction(e)}}k.contextType=v.a,k.defaultProps={nameWeight:"bold",withIcon:!0};const S=I.a.create((e=>({root:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},flexStart:{alignItems:"flex-start"},icon:{alignSelf:"flex-start",marginRight:e.spaces.space12},customIcon:{borderRadius:e.borderRadii.infinite,height:e.spaces.space32,width:e.spaces.space32},text:{flexShrink:1},buttons:{alignItems:"center",alignSelf:"center",flexDirection:"row",paddingLeft:e.spaces.space8},marginLeft:{marginLeft:e.spaces.space4},topic:{alignItems:"center",flexDirection:"row",flexShrink:1,paddingRight:e.spaces.space4}})));t.a=Object(m.a)(Object(h.a)(k))},gwY8:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("ERkP");const c=n.n(o).a.createContext({onFollow:void 0,onInitialize:void 0,onUnfollow:void 0})},hxu0:function(e,t,n){"use strict";var o=n("97Jx"),c=n.n(o),a=n("ERkP"),r=n.n(a),i=n("vqbU");t.a=e=>t=>r.a.createElement(i.a.Consumer,null,(n=>r.a.createElement(e,c()({},t,{isInSidebar:n}))))},wtjx:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return g}));var o=n("Ssj5"),c=n("RqPI");const a="recentSearches",r="rweb.recentSearches",i=e=>(t,n,{userPersistence:o})=>o.set(r,{recentSearches:e}).catch((()=>{Promise.resolve()})),s=(e,t)=>{let n=[];if(e&&e.user){const o=e.user;n=t.filter((e=>e.keyword||e.topic||e.event||e.user&&e.user.id!==o.id))}else if(e&&e.topic){const o=e.topic;n=t.filter((e=>e.keyword||e.user||e.event||e.topic&&e.topic.id!==o.id))}else if(e&&e.event){const o=e.event;n=t.filter((e=>e.keyword||e.user||e.topic||e.event&&e.event.id!==o.id))}else if(e&&e.keyword){const o=e.keyword;n=t.filter((e=>e.keyword&&e.keyword.query!==o.query||e.user||e.topic||e.event))}return n},l={fetched:!1,recentSearches:[]};const d=e=>e.recentSearches.recentSearches,p=e=>d(e)[0]||null,u=e=>e.recentSearches.fetched,h="rweb/recentSearches/INIT_FROM_CACHE",m=e=>({type:h,payload:e}),b="rweb/recentSearches/REMOVE_QUERY",f=e=>(t,n,{userPersistence:o})=>{t({payload:e,type:b});const a=n().recentSearches;return Object(c.n)(n())?t(i(a.recentSearches)):Promise.resolve()},y="rweb/recentSearches/CLEAR_ALL",I=()=>(e,t,{userPersistence:n})=>{e({type:y});const o=t().recentSearches;return Object(c.n)(t())?e(i(o.recentSearches)):Promise.resolve()},v="rweb/recentSearches/ADD_QUERY",w=e=>(t,n,{userPersistence:o})=>{t({payload:e,type:v});const a=n().recentSearches;return Object(c.n)(n())?t(i(a.recentSearches)):Promise.resolve()},g=()=>(e,t,{userPersistence:n})=>t().recentSearches.fetched?Promise.resolve():e(((e,t,{userPersistence:n})=>{const o=t();return Object(c.n)(o)?n.get(r).then((t=>{e(m(t))})).catch((()=>{e(m())})):(e(m()),Promise.resolve())}));o.a.register({[a]:function(e=l,t){switch(t.type){case v:{const n=t.payload,o=n?s(n,e.recentSearches):[];return o.length>49&&o.splice(49,1),n&&o.unshift(n),{...e,recentSearches:o}}case b:{const n=t.payload,o=n?s(n,e.recentSearches):[];return{...e,recentSearches:o}}case y:return{fetched:!0,recentSearches:[]};case h:return{...e,...t.payload,fetched:!0};default:return e}}})},zWr2:function(e,t,n){"use strict";n.r(t);var o=n("ezF+"),c=n("VPAj"),a=n("E3Hq"),r=n("ERkP"),i=n.n(r),s=n("Zejx"),l=n("rxPX");const d=(e,t)=>s.a.select(e,t.entry.content.topicId);var p=Object(l.a)().propsFromState((()=>({topic:d}))),u=(n("kYxP"),n("v6aA")),h=n("0KEI");var m=Object(l.a)().propsFromActions((()=>({createLocalApiErrorHandler:Object(h.createLocalApiErrorHandlerWithContextFactory)("TOPIC_PILL_CONTEXT"),follow:s.a.follow,unfollow:s.a.unfollow}))).withAnalytics(),b=n("3XMw"),f=n.n(b),y=n("Tp1h"),I=n("Jkc4"),v=n("gwY8"),w=n("MWbm"),g=n("UnyZ"),k=n("aV/s"),S=n("rHpw");const C=f.a.ge8f3043,E=f.a.aa576cbf,x=f.a.i77347d0,_=f.a.e839db39,A=e=>{const{loggedInUserId:t}=i.a.useContext(u.a),{analytics:n,createLocalApiErrorHandler:o,follow:c,notInterestedOnClick:a,topic:r,unfollow:s,withActionIcon:l}=e,{following:d,id:p,name:h,not_interested:m}=r,b=i.a.useRef(!1),[f,S]=i.a.useState(0),A=i.a.useCallback((e=>{if(0===f){const{nativeEvent:{layout:{width:t}}}=e;S(t)}}),[f]),L=e=>{if(!m&&l)return d?g.a.Active:g.a.Expand},O=(e,t,n)=>e(d?R(n):D(t)),D=e=>t=>{c(p).catch(o()).then(e&&e(p)),n.scribeAction("follow")},R=e=>t=>{s(p).catch(o()).then(e&&e(p)),n.scribeAction("unfollow")},j=(e,n,o)=>{if(t&&a)return{mode:g.a.Remove,onSecondaryClick:a,accessibilityLabel:x({topicName:h}),hoverLabel:_,disabled:d||m}};return i.a.createElement(I.a,{customText:h,displayMode:y.a.topic},(e=>i.a.createElement(v.a.Consumer,null,(({onFollow:t,onInitialize:n,onUnfollow:o})=>(n&&!b.current&&(n(p,d),b.current=!0),i.a.createElement(w.a,{onLayout:A,style:[P.root,{minWidth:f}]},i.a.createElement(k.a,{accessibilityLabel:d?E({topicName:h}):C({topicName:h}),disabled:m,key:p,mode:L(),onClick:O(e,t,o),secondaryAction:j(),selected:d,style:P.pill,text:h})))))))};A.defaultProps={withActionIcon:!0};const P=S.a.create((e=>({root:{marginHorizontal:e.spaces.space4,marginVertical:e.spaces.space4},pill:{textOverflow:"ellipsis"},roundIcon:{borderRadius:e.borderRadii.infinite,height:"100%",width:"100%"}})));var L=m(A),O=n("Irs7"),D=n("lnL+"),R=n("XcJG");const j=e=>{const t=Object(O.b)(),{entry:{content:n},feedbackItems:o,topic:c}=e,{topicDisplayType:r,topicFunctionalityType:s}=n;i.a.useEffect((()=>{c&&t.scribeAction("impression")}),[]);const l=i.a.useCallback((()=>{t.scribeAction("click")}),[t]);if(!c)return null;const d=Object(a.a)({feedbackItems:o,topic:c,topicItemContent:n}),p=s!==R.b.Pivot&&r!==R.a.PillWithoutActionIcon;return s===R.b.Pivot?i.a.createElement(w.a,{style:H.root},i.a.createElement(D.a,{link:`/i/topics/${c.id}`,onClick:l,text:c.name})):i.a.createElement(L,{notInterestedOnClick:d,topic:c,withActionIcon:p})},H=S.a.create((e=>({root:{margin:e.spaces.space4}})));var T=p(i.a.memo(j));t.default=({shouldDisplayBorder:e=!1})=>o.b({component:T,isFocusable:Object(c.a)(!0),getScribeDataItem:a.b,shouldDisplayBorder:Object(c.a)(e)}).getHandler()}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.topicHandler.cde538c5.js.map